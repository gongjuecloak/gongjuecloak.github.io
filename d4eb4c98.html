<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>数据库面试题 | 公爵书房</title><meta name="keywords" content="面试题,数据库"><meta name="author" content="公爵"><meta name="copyright" content="公爵"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="数据库面试题"><meta name="application-name" content="数据库面试题"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="数据库面试题"><meta property="og:url" content="https://blog.gjcloak.top/d4eb4c98.html"><meta property="og:site_name" content="公爵书房"><meta property="og:description" content="数据库基础知识为什么要使用数据库 答题思路一：内存、文件和数据库的比较  如果将数据保存在内存中，虽然说存取速度快，但是会导致数据不能永久的保存。 如果将数据保存在文件中，可以解决数据永久保存的问题，但是却引发了新的问题：速度比内存操作慢，频繁的 IO 操作，而且查询数据不方便。 但是将数据保存在数"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cos.gjcloak.xyz/pigo/202208191053083.jpeg?imageMogr2/format/webp/interlace/1/quality/0"><meta property="article:author" content="公爵"><meta property="article:tag" content="IT,前端,公爵,公爵书房,笔记,读书,阅读,科普,互联网,EU4,欧陆风云4,P社,CK3,HOI4"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cos.gjcloak.xyz/pigo/202208191053083.jpeg?imageMogr2/format/webp/interlace/1/quality/0"><meta name="description" content="数据库基础知识为什么要使用数据库 答题思路一：内存、文件和数据库的比较  如果将数据保存在内存中，虽然说存取速度快，但是会导致数据不能永久的保存。 如果将数据保存在文件中，可以解决数据永久保存的问题，但是却引发了新的问题：速度比内存操作慢，频繁的 IO 操作，而且查询数据不方便。 但是将数据保存在数"><link rel="shortcut icon" href="https://cos.gjcloak.xyz/pigo/202207141547395.svg"><link rel="canonical" href="https://blog.gjcloak.top/d4eb4c98"><link rel="preconnect" href="//npm.elemecdn.com"><link rel="preconnect" href="//npm.onmicrosoft.cn"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//www.clarity.ms"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="tzVeQg-MESFX8FYW0CcPqg6DtebQpZkdEDHJl6sXXYo"><meta name="baidu-site-verification" content="code-xxx"><meta name="msvalidate.01" content="1A2B2A146FD2913086CF272A99C0AC60"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?4f7a563c757c9423f8b1208f9b00c480";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-ME8L91NJ6Q"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ME8L91NJ6Q")</script><script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/gfgpd89g31",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><script>const GLOBAL_CONFIG={linkPageTop:{enable:!0,title:"与博主们一起进步",addFriendPlaceholder:"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},postHeadAiDescription:{enable:!0,gptName:"A Xiang No.7",mode:"local",switchBtn:!1,btnLink:"https://blog.gjcloak.top",randomNum:3,basicWordCount:1e3,key:"7fb4814bc9b6129bc1b5",Referer:"https://blog.gjcloak.top"},diytitle:{enable:!0,leaveTitle:"w(ﾟДﾟ)w 不要走！再看看嘛！",backTitle:"♪(^∇^*)欢迎肥来！"},LA51:{enable:!0,ck:"JiqZF2l8iEaoaxpN",LingQueMonitorID:"JiqZF2l8iEaoaxpN"},greetingBox:void 0,twikooEnvId:"https://twikoo.gjcloak.top/",commentBarrageConfig:void 0,root:"/",preloader:void 0,friends_vue_info:{apiurl:"https://fcircle.gjcloak.top/"},navMusic:!0,mainTone:void 0,authorStatus:void 0,algolia:void 0,localSearch:{path:"/search.xml",preload:!0,languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简",rightMenuMsgToTraditionalChinese:"转为繁体",rightMenuMsgToSimplifiedChinese:"转为简体"},noticeOutdate:{limitDay:30,position:"top",messagePrev:"自上次更新以来已经过去了",messageNext:"天，文章的内容可能已过时。若内容或图片失效，请留言反馈。部分素材来自网络，若不小心影响到您的利益，请联系公爵删除。要是本文有帮助到你的话，可以留言支持下或者赞助本站运营，谢谢！"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:330},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,simplehomepage:!0,post:!0},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{copy:!0,copyrightEbable:!1,limitCount:50,languages:{author:"作者: 公爵",link:"链接: ",source:"来源: 公爵书房",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。",copySuccess:"复制成功，复制和转载请标注本文地址"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#3b70fc",bgDark:"#1f1f1f",position:"top-center"},source:{justifiedGallery:{js:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js",css:"https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,shortcutKey:void 0,autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={configTitle:"公爵书房",title:"数据库面试题",postAI:"",pageFillDescription:"数据库基础知识, 为什么要使用数据库, 数据库的发展阶段 ⭐, 文件系统与数据库系统之间的比较, 什么是数据库系统, 什么是数据库, 什么是数据库的约束, 什么是数据库管理系统, 什么是数据模型, 什么是规范化, 简述数据库的三级模式结构, 数据库系统的生命周期, 什么是 SQL？, 什么是 MySQL?, 范式的定义 ⭐, 数据库三大范式是什么, mysql有关权限的表都有哪几个, MySQL的binlog有有几种录入格式？分别有什么区别？, 什么是数据字典, Oracle 和 MySQL 的区别, 数据库和非关系型数据库比较, 关系数据库, 关系型数据库和非关系型数据库比较, 数据库连接池, 列举几种表连接方式, 什么是内连接、外连接、交叉连接, 超键、候选键、主键、外键分别是什么, 主键和外键的区别, 如何维护数据库的完整性和一致性, 什么是主码?什么是外码, 完整性约束, 常用 SQL 语句, SQL 的四个组成部分 ⭐, SQL 约束有哪几种？, 六种关联查询, 什么是子查询, 子查询的三种情况, in 和 exists 的区别, 数据类型有哪些, varchar(50)中50的涵义, varchar 和 char 的区别, int(20)中20的涵义, mysql为什么这么设计, mysql中int(10)和char(10)以及varchar(10)的区别, FLOAT和DOUBLE的区别是什么？, drop、delete与truncate的区别, SQL 的生命周期？, 在数据库中查询语句速度很慢如何优化, 超大分页怎么处理？, Union 和 Union All 有什么不同, order by 和 group by 的区别, 什么是 PL x2F SQL, 引擎, MySQL存储引擎MyISAM与InnoDB区别, MyISAM索引与InnoDB索引的区别？, InnoDB引擎的4大特性, 存储引擎选择, 索引, 什么是索引, 索引的作用, 添加索引目的 ⭐, 什么是聚集索引或非聚集索引 ⭐, 索引有哪些优缺点, 什么样的字段适合建索引, 索引类型有哪些, 索引的数据结构（b树hash）, 索引的基本原理, 索引算法有哪些？, 索引设计的原则？, 创建索引的原则（重中之重）, 创建索引的三种方式删除索引, 创建索引时需要注意什么？, 使用索引查询一定能提高查询的性能吗？为什么, 百万级别或以上的数据如何删除, 前缀索引, 什么是最左前缀原则？什么是最左匹配原则, B树和B+树的区别, 使用B树的好处, 使用B+树的好处, Hash索引和B+树所有有什么区别或者说优劣呢?, 数据库为什么使用B+树而不是B树, B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据, 什么是聚簇索引？何时使用聚簇索引与非聚簇索引, 非聚簇索引一定会回表查询吗？, 联合索引是什么？为什么需要注意联合索引中的顺序？, 事务, 什么是事务, 事物的四大特性(ACID)介绍一下?, 什么是脏读？幻读？不可重复读？, 什么是事务的隔离级别？MySQL的默认隔离级别是什么？, 事务的隔离级别有哪些, 锁, 什么是锁, 隔离级别与锁的关系, 按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法, 从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了, MySQL中InnoDB引擎的行锁是怎么实现的？, InnoDB存储引擎的锁的算法有三种, 什么是死锁？怎么解决？, 数据库的乐观锁和悲观锁是什么？怎么实现的？, 视图, 为什么要使用视图, 什么是视图, 视图有哪些特点, 视图的使用场景有哪些, 视图的优点, 视图的缺点, 表和视图的关系, 什么是游标, 存储过程与函数, 什么是存储过程, 存储过程用什么来调用, 存储过程的优缺点, 存储过程与函数的区别, 触发器, 什么是触发器, 触发器的使用场景有哪些, MySQL中都有哪些触发器, 事前触发和事后触发有什么区别, 语句级触发和行级触发有何区别数据库基础知识为什么要使用数据库答题思路一内存文件和数据库的比较如果将数据保存在内存中虽然说存取速度快但是会导致数据不能永久的保存如果将数据保存在文件中可以解决数据永久保存的问题但是却引发了新的问题速度比内存操作慢频繁的操作而且查询数据不方便但是将数据保存在数据库中完美的解决了以上所有问题数据可以永久保存通过使用语句使得查询方便效率高并且管理数据方便所以要使用数据库答题思路二使用数据库的好处支持数据的独立性和有效访问减少了应用开发时间支持对数据完整性和安全性的控制支持并发访问支持对故障的恢复数据库的发展阶段人工管理阶段文件系统阶段数据库系统阶段文件系统与数据库系统之间的比较数据库可以通过直接进行很多操作而文件的话只提供了简单的操作用文件的话要针对不同的文件结构编写不同的代码由于实际应用中并发同时访问导致数据访问不一致文件没有解决办法需要在应用软件层解决而中有故障处理文件系统不具备这个能力但会自动恢复安全和访问控制什么是数据库系统在计算机系统中引入数据库后的系统它是由数据库数据库用户计算机软硬件数据库管理员构成什么是数据库数据库是长期存在计算机内有组织的可共享数据集合什么是数据库的约束约束约束约束约束约束什么是数据库管理系统用于用户与操作系统之间的一层数据管理软件什么是数据模型数据模型是一种标识实体类型及其实体间联系的模型典型的数据模型有网状模型层次模型和关系模型什么是规范化从关系数据库的表中除去冗余数据的过程称为规范化包括精简数据库的结构从表中删除冗余的列标识所有依赖于其它数据的数据简述数据库的三级模式结构内模式也称存储模式数据物理结构和存储方式的描述是数据在数据库中的组织方式模式也称逻辑模式是数据库中全体数据成员的逻辑结构和特征的描述外模式也称用户模式是数据库用户能看见和使用的局部数据的逻辑结构和特征的描述数据库系统的生命周期数据库系统的规划阶段数据库设计在数据库内创建加载数据基于数据库开发应用程序管理和维护数据库重构什么是结构化查询语言简称是一种数据库查询语言作用用于存取数据查询更新和管理关系数据库系统什么是是一个关系型数据库管理系统由瑞典公司开发属于旗下产品是最流行的关系型数据库管理系统之一在应用方面是最好的关系数据库管理系统应用软件之一在企业级开发中非常常用因为是开源免费的并且方便扩展范式的定义改造关系模式通过分解关系模型来消除其中不合适的数据依赖以决绝插入异常删除异常数据用余数据库三大范式是什么第一范式关系模式中每个列都不可以再拆分第二范式在第一范式的基础上非主键列完全依赖于主键而不能是依赖于主键的一部分第三范式在第二范式的基础上非主键列只依赖于主键不依赖于其他非主键在设计数据库结构的时候要尽量遵守三范式如果不遵守必须有足够的理由比如性能事实上我们经常会为了性能而妥协数据库的设计有关权限的表都有哪几个服务器通过权限表来控制用户对数据库的访问权限表存放在数据库里由脚本初始化这些权限表分别和下面分别介绍一下这些表的结构和内容权限表记录允许连接到服务器的用户帐号信息里面的权限是全局级的权限表记录各个帐号在各个数据库上的操作权限权限表记录数据表级的操作权限权限表记录数据列级的操作权限权限表配合权限表对给定主机上数据库级操作权限作更细致的控制这个权限表不受和语句的影响的有有几种录入格式分别有什么区别有三种格式和模式下每一条会修改数据的都会记录在中不需要记录每一行的变化减少了日志量节约了提高性能由于的执行是有上下文的因此在保存的时候需要保存相关的信息同时还有一些使用了函数之类的语句无法被记录复制级别下不记录语句上下文相关信息仅保存哪条记录被修改记录单元为每一行的改动基本是可以全部记下来但是由于很多操作会导致大量行的改动比如因此这种模式的文件保存的信息太多日志量太大一种折中的方案普通操作使用记录当无法使用的时候使用此外新版的中对级别也做了一些优化当表结构发生变化的时候会记录语句而不是逐行记录什么是数据字典数据字典是关系数据库管理系统内部的一组系统表它记录了数据库中所有的定义信息包括关系模式定义视图定义索引定义完整性约束定义各类用户对数据库的操作权限统计信息等关系数据库管理系统在执行的数据定义语句时实际上就是在更新数据字典中的相应信息和的区别库函数不同是用表空间来管理的不是显示当前所有的表用户改变连接用户显示当前连接用户执行外部脚本的语句的不同分页查询时候时候用用的语法的不同数据库和非关系型数据库比较关系数据库关系型数据库和非关系型数据库比较关系型数据库采用了关系模型来组织数据的数据库以行和列形式存储数据以便于用户理解通用的语言使得操作关系型数据库非常方便关系型数据库遵循原则常见的关系型数据库比如关系型数据库存在的问题网站的用户并发性非常高往往达到每秒上万次读写请求对于传统关系型数据库来说硬盘是一个很大的瓶颈网站每天产生的数据量是巨大的对于关系型数据库来说在一张包含海量数据的表中查询效率是非常低的因此关系型数据不适合持久存储海量数据很难进行横向扩展增加服务器也就是说想要提高数据处理能力要使用性能更好的计算机纵向扩展性能欠佳导致关系型数据库性能欠佳的最主要原因就是多表的关联查询为了保证数据库的特性必须尽量按照范式要求设计数据库关系数据库中的表存储的往往是一个固定的格式化的数据结构而非关系型数据库就可以很好的解决关系型数据库很难解决的大数据问题非关系型数据库非关系型数据库以键值对存储且结构不固定每一个元组可以有不一样的字段每个元组可以根据需要增加一些自己的键值对不局限于固定的结构可以减少一些时间和空间的开销支持分布式存储容易进行横向扩展不遵循特性不提供对事务的处理常见的非关系型数据库比如数据库连接池概述数据库连接池是负责分配管理和释放数据库连接它允许应用程序重复使用一个现有的数据库连接而不是每次访问数据库的时候都需要重新建立一次连接为什么要使用连接池数据库连接是一种关键的有限的昂贵的资源这一点在多用户的网页应用程序中体现得尤为突出一个数据库连接对象均对应一个物理数据库连接每次操作都打开一个物理连接使用完都关闭连接这样造成系统的性能低下数据库连接池的解决方案是在应用程序启动时建立足够的数据库连接并将这些连接组成一个连接池由应用程序动态地对池中的连接进行申请使用和释放对于多于连接池中连接数的并发请求应该在请求队列中排队等待并且应用程序可以根据池中连接的使用率动态增加或减少池中的连接数连接池技术尽可能多地重用了消耗内存地资源大大节省了内存提高了服务器地服务效率能够支持更多的客户服务通过使用连接池将大大提高程序运行效率同时我们可以通过其自身的管理机制来监视数据库连接的数量使用情况等传统的连接机制与连接池运行机制区别执行一个命令不使用数据库连接池的步骤建立连接三次握手认证三次握手真正的执行关闭四次握手关闭可以看到为了执行一条却多了非常多网络交互应用需要频繁的创建连接和关闭连接使用数据库连接池的步骤第一次访问的时候需要建立连接但是之后的访问均会复用之前创建的连接直接执行语句列举几种表连接方式内连接自连接外连接左右全交叉连接什么是内连接外连接交叉连接内连接只连接匹配的行默认只有两个元素表相匹配的才能在结果集中显示左外连接左边为驱动表驱动表的数据全部显示匹配表的不匹配的不会显示右外连接右边为驱动表驱动表的数据全部显示匹配表的不匹配的不会显示全外连接连接的表中不匹配的数据全部会显示出来交叉连接生成笛卡尔积它不使用任何匹配或者选取条件而是直接将一个数据源中的每个行与另一个数据源的每个行都匹配显示的结果是连接表数的乘积超键候选键主键外键分别是什么超键在关系中能唯一标识元组的属性集称为关系模式的超键一个属性可以为作为一个超键多个属性组合在一起也可以作为一个超键超键包含候选键和主键候选键即最小超键即没有冗余元素的超键候选键中的元素称为主属性主键候选键中选出一个作为主键一个数据列只能有一个主键且主键的取值不能缺失即不能为空值外键在一个表中存在的另一个表的主键称此表的外键主键和外键的区别主键在本表中是唯一的不可为空的外键可以重复可以为空外键和另一张表的主键关联不能创建对应表中不存在的外键如何维护数据库的完整性和一致性尽可能使用约束如主键外键非空字段等来约束这样做效率最高也最方便其次是使用触发器这种方法可以保证无论什么业务系统务逻辑但这样做麻烦编程复杂效率低下什么是主码什么是外码若关系中某一属性组的值能唯一地标识一个元组而其子集不能则称该属性组为候选码若一个关系有多个候选码则选定其中一个为主码如果是基本关系的一个或一组属性但不是关系的码是基本关系的主码如果与相对应则称是的外码完整性约束数据库的完整性是指数据的正确性和相容性数据的正确性是指数据是符合现实世界语义反映当前实际状况的数据的相容性是指数据库同一对象在不同关系表中的数据是符合逻辑的实体完整性若属性是基本关系的主属性则不能取空值所谓空值是指不知道不存在无意义的值参照完整性若属性是基本关系的外码它与基本关系的主码相对应则对于中每个元组在上的值必须或者取空值的每个属性值均为空值或者等于中某个元组的主码值某个同学班长属性可以是尚为选出班长也可以是本关系中某个元组的学号值用户定义完整性针对某一具体关系数据库的约束条件反映某一具体应用涉及的数据必须满足的语义要求如某个属性必须取唯一值某个非主属性不能取空值常用语句的四个组成部分数据库模式定义语言用来创建数据库中的各种对象表视图索引同义词聚簇等数据查询语言基本结构是由子句子句和子句组成的查询块数据操纵语言插入更新和删除数据控制语言用来授予或回收访问数据库的某种特权并控制数据库操纵事物发生的时间和效果对数据库实行监视等约束有哪几种用于控制字段的内容一定不能为空控件字段内容不能重复一个表允许有多个约束也是用于控件字段内容不能重复但它在一个表只允许出现一个用于预防破坏表之间连接的动作也能防止非法数据插入外键列因为它必须是它指向的那个表中的值之一用于控制字段的值范围六种关联查询交叉连接内连接外连接联合查询与全连接交叉连接或者没有任何关联条件结果是笛卡尔积结果集会很大没有意义很少使用内连接或者多表中同时符合某种条件的数据记录的集合可以缩写为内连接分为三类等值连接不等值连接自连接外连接左外连接以左表为主先查询出左表按照后的关联条件匹配右表没有匹配到的用填充可以简写成右外连接以右表为主先查询出右表按照后的关联条件匹配左表没有匹配到的用填充可以简写成联合查询与就是把多个结果集集中在一起前的结果为基准需要注意的是联合查询的列数要相等相同的记录行会合并如果使用不会合并重复的记录行效率高于全连接不支持全连接可以使用和和联合使用什么是子查询条件一条语句的查询结果做为另一条查询语句的条件或查询结果嵌套多条语句嵌套使用内部的查询语句称为子查询子查询的三种情况子查询是单行单列的情况结果集是一个值父查询使用等运算符查询工资最高的员工是谁子查询是多行单列的情况结果集类似于一个数组父查询使用运算符查询工资最高的员工是谁子查询是多行多列的情况结果集类似于一张虚拟表不能用于条件用于子句中做为子表查询出年以后入职的员工信息查询所有的部门信息与上面的虚拟表中的信息比对找出所有部门相等的员工使用表连接和的区别先进行子查询再进行外查询先执行外查询再执行子查询语句是把外表和内表作连接而语句是对外表作循环每次循环再对内表进行查询适合子查询的表比外查询大的查询语句如果内表和外表差不多大那么和的效率差别不大数据类型有哪些整数类型包括分别表示字节字节字节字节字节整数任何整数类型都可以加上属性表示数据是无符号的即非负整数长度整数类型可以被指定长度例如表示长度为的类型长度在大多数场景是没有意义的它不会限制值的合法范围只会影响显示字符的个数而且需要和属性配合使用才有意义例子假定类型设定为属性为如果用户插入的数据为的话那么数据库实际存储数据为实数类型包括可以用于存储比还大的整型能存储精确的小数而和是有取值范围的并支持使用标准的浮点进行近似计算计算时和相比效率更高一些你可以理解成是用字符串进行处理字符串类型包括用于存储可变长字符串它比定长类型更节省空间使用额外或个字节存储字符串长度列长度小于字节时使用字节表示否则使用字节表示存储的内容超出设置的长度时内容会被截断是定长的根据定义的字符串长度分配足够的空间会根据需要使用空格进行填充方便比较适合存储很短的字符串或者所有值都接近同一个长度存储的内容超出设置的长度时内容同样会被截断使用策略对于经常变更的数据来说比更好因为不容易产生碎片对于非常短的列比在存储空间上更有效率使用时要注意只分配需要的空间更长的列排序时会消耗更多内存尽量避免使用类型查询时会使用临时表导致严重的性能开销枚举类型把不重复的数据存储为一个预定义的集合有时可以使用代替常用的字符串类型存储非常紧凑会把列表值压缩到一个或两个字节在内部存储时其实存的是整数尽量避免使用数字作为枚举的常量因为容易混乱排序是按照内部存储的整数日期和时间类型尽量使用空间效率高于用整数保存时间戳通常不方便处理如果需要存储微妙可以使用存储看到这里这道真题是不是就比较容易回答了中的涵义最多存放个字符和存储所占空间一样但后者在排序时会消耗更多内存因为采用计算长度引擎也一样在早期版本中代表字节数现在代表字符数和的区别是定长的根据定义的字符串长度分配足够的空间存储的内容超出设置的长度时内容会被截断用于存储可变长字符串它比定长类型更节省空间存储的内容超出设置的长度时内容同样会被截断对于经常变更的数据来说比更好因为不容易产生碎片对于非常短的列比在存储空间上更有效率中的涵义是指显示字符的长度表示最大显示宽度为但仍占字节存储存储范围不变不影响内部存储只是影响带定义的时前面补多少个易于报表展示为什么这么设计对大多数应用没有意义只是规定一些工具用来显示字符的个数和存储和计算均一样中和以及的区别的表示显示的数据的长度不是存储数据的大小和的表示存储数据的大小即表示存储多少个字符位的数据长度占个字节型位位固定字符串不足补空格最多个字符位可变字符串不足补空格最多个字符表示存储定长的个字符不足个就用空格补齐占用更多的存储空间表示存储个变长的字符存储多少个就是多少个空格也按一个字符存储这一点是和的空格不同的的空格表示占位不算一个字符和的区别是什么类型数据可以存储至多位十进制数并在内存中占字节类型数据可以存储至多位十进制数并在内存中占字节与的区别三者都表示删除但是三者有一些差别的生命周期应用服务器与数据库服务器建立一个连接数据库进程拿到请求解析并生成执行计划执行读取数据到内存并进行逻辑处理通过步骤一的连接发送结果到客户端关掉连接释放资源在数据库中查询语句速度很慢如何优化建索引减少表之间的关联优化尽量让很快定位数据不要让做全表查询应该走索引把数据量大的表排在前面简化查询字段没用的字段不要已经对返回结果的控制尽量返回少量数据尽量用来查询不要用超大分页怎么处理超大的分页一般从两个方向上来解决数据库层面这也是我们主要集中关注的虽然收效没那么大类似于这种查询其实也是有可以优化的余地的这条语句需要数据然后基本上全部丢弃只取条当然比较慢当时我们可以修改为这样虽然也了一百万的数据但是由于索引覆盖要查询的所有字段都在索引中所以速度会很快同时如果连续的好我们还可以效率也是不错的优化的可能性有许多种但是核心思想都一样就是减少的数据从需求的角度减少这种请求主要是不做类似的需求直接跳转到几百万页之后的具体某一页只允许逐页查看或者按照给定的路线走这样可预测可缓存以及防止泄漏且连续被人恶意攻击和有什么不同在进行表链接后会筛选掉重复的记录所以在表链接后会对所产生的结果集进行排序运算删除重复的记录再返回结果实际大部分应用中是不会产生重复的记录最常见的是过程表与历史表只是简单的将两个结果合并后就返回这样如果返回的两个结果集中有重复的数据那么返回的结果集就会包含重复的数据了从效率上说要比快很多所以如果可以确认合并的两个结果集中不包含重复的数据的话那么就使用和的区别排序查询升序降序分组查询只能用于子句作用于组内条件子句可以直接跟函数表达式使用子句的查询语句需要使用聚合函数什么是是一种程序语言叫做过程化语言是数据库对语句的扩展在普通语句的使用上增加了编程语言的特点所以把数据操作和查询语句组织在代码的过程性单元中通过逻辑判断循环等操作实现复杂的功能或者计算只有数据库有目前不支持的引擎存储引擎与区别存储引擎中的数据索引以及其他对象是如何存储的是一套文件系统的实现常用的存储引擎有以下引擎引擎提供了对数据库事务的支持并且还提供了行级锁和外键的约束它的设计的目标就是处理大数据容量的数据库系统引擎原本的默认引擎不提供事务的支持也不支持行级锁和外键引擎所有的数据都在内存中数据的处理速度快但是安全性不高与区别索引与索引的区别索引是聚簇索引索引是非聚簇索引的主键索引的叶子节点存储着行数据因此主键索引非常高效索引的叶子节点存储的是行数据地址需要再寻址一次才能得到数据非主键索引的叶子节点存储的是主键和其他带索引的列数据因此查询时做到覆盖索引会非常高效引擎的大特性插入缓冲二次写自适应哈希索引预读存储引擎选择如果没有特别的需求使用默认的即可以读写插入为主的应用程序比如博客系统新闻门户网站更新删除操作频率也高或者要保证数据的完整性并发量高支持事务和外键比如自动化办公系统索引什么是索引索引是一种特殊的文件数据表上的索引是表空间的一个组成部分它们包含着对数据表里所有记录的引用指针索引是一种数据结构数据库索引是数据库管理系统中一个排序的数据结构以协助快速查询更新数据库表中数据索引的实现通常使用树及其变种树更通俗的说索引就相当于目录为了方便查找书中的内容通过对内容建立索引形成目录索引是一个文件它是要占据物理空间的索引的作用索引就一种特殊的查询表数据库的搜索可以利用它加速对数据的检索它很类似与现实生活中书的目录不需要查询整本书内容就可以找到想要的数据添加索引目的提高数据查询的效率什么是聚集索引或非聚集索引物理存储顺序与逻辑顺序相同即聚集索引物理存储顺序与索引顺序不一致即非聚集索引索引有哪些优缺点索引的优点可以大大加快数据的检索速度这也是创建索引的最主要的原因通过使用索引可以在查询的过程中使用优化隐藏器提高系统的性能索引的缺点时间方面创建索引和维护索引要耗费时间具体地当对表中的数据进行增加删除和修改的时候索引也要动态的维护会降低增改删的执行效率空间方面索引需要占物理空间什么样的字段适合建索引唯一不为空经常被查询的字段索引类型有哪些主键索引数据列不允许重复不允许为一个表只能有一个主键唯一索引数据列不允许重复允许为值一个表允许多个列创建唯一索引可以通过创建唯一索引可以通过创建唯一组合索引普通索引基本的索引类型没有唯一性的限制允许为值可以通过创建普通索引可以通过创建组合索引全文索引是目前搜索引擎使用的一种关键技术可以通过创建全文索引索引的数据结构树索引的数据结构和具体存储引擎的实现有关在中使用较多的索引有索引树索引等而我们经常使用的存储引擎的默认索引实现为树索引对于哈希索引来说底层的数据结构就是哈希表因此在绝大多数需求为单条记录查询的时候可以选择哈希索引查询性能最快其余大部分场景建议选择索引树索引通过存储引擎取数据基本上的人用的就是了按照实现方式分的索引类型目前只有两种树索引和索引树索引是数据库中使用最频繁的索引类型基本所有存储引擎都支持索引通常我们说的索引不出意外指的就是树索引实际是用树实现的因为在查看表索引时一律打印所以简称为树索引查询方式主键索引区关联保存的时数据的地址按主键查询普通索引区关联的的地址然后再到达上面的地址所以按主键查询速度最快性质棵子的节点包含个关键字不用来保存数据而是保存数据的索引所有的叶子结点中包含了全部关键字的信息及指向含这些关键字记录的指针且叶子结点本身依关键字的大小自小而大顺序链接所有的非终端结点可以看成是索引部分结点中仅含其子树中的最大或最小关键字树中数据对象的插入和删除仅在叶节点上进行树有个头指针一个是树的根节点一个是最小关键码的叶节点哈希索引简要说下类似于数据结构中简单实现的表散列表一样当我们在中用哈希索引时主要就是通过算法常见的算法有直接定址法平方取中法折叠法除数取余法随机数法将数据库字段数据转换成定长的值与这条数据的行指针一并存入表的对应位置如果发生碰撞两个不同关键字的值相同则在对应键下以链表形式存储当然这只是简略模拟图索引的基本原理索引用来快速地寻找那些具有特定值的记录如果没有索引一般来说执行查询时遍历整张表索引的原理很简单就是把无序的数据变成有序的查询把创建了索引的列的内容进行排序对排序结果生成倒排表在倒排表内容上拼上数据地址链在查询的时候先拿到倒排表内容再取出数据地址链从而拿到具体数据索引算法有哪些索引算法有算法和算法算法是最常用的数据库索引算法也是默认的算法因为它不仅可以被用在和这些比较操作符上而且还可以用于操作符只要它的查询条件是一个不以通配符开头的常量例如只要它的查询条件是一个不以通配符开头的常量如果一通配符开头或者没有使用常量则不会使用索引例如算法索引只能用于对等比较例如相当于操作符由于是一次定位数据不像索引需要从根节点到枝节点最后才能访问到页节点这样多次访问所以检索效率远高于索引索引设计的原则适合索引的列是出现在子句中的列或者连接子句中指定的列基数较小的类索引效果较差没有必要在此列建立索引使用短索引如果对长字符串列进行索引应该指定一个前缀长度这样能够节省大量索引空间不要过度索引索引需要额外的磁盘空间并降低写操作的性能在修改表内容的时候索引会进行更新甚至重构索引列越多这个时间就会越长所以只保持需要的索引有利于查询即可创建索引的原则重中之重索引虽好但也不是无限制的使用最好符合一下几个原则最左前缀匹配原则组合索引非常重要的原则会一直向右匹配直到遇到范围查询就停止匹配比如如果建立顺序的索引是用不到索引的如果建立的索引则都可以用到的顺序可以任意调整较频繁作为查询条件的字段才去创建索引更新频繁字段不适合创建索引若是不能有效区分数据的列不适合做索引列如性别男女未知最多也就三种区分度实在太低尽量的扩展索引不要新建索引比如表中已经有的索引现在要加的索引那么只需要修改原来的索引即可定义有外键的数据列一定要建立索引对于那些查询中很少涉及的列重复值比较多的列不要建立索引对于定义为和的数据类型的列不要建立索引创建索引的三种方式删除索引第一种方式在执行时创建索引第二种方式使用命令去增加索引用来创建普通索引索引或索引其中是要增加索引的表名指出对哪些列进行索引多列时各列之间用逗号分隔索引名可自己命名缺省时将根据第一个索引列赋一个名称另外允许在单个语句中更改多个表因此可以在同时创建多个索引第三种方式使用命令创建可对表增加普通索引或索引但是不能创建索引删除索引根据索引名删除普通索引唯一索引全文索引表名索引名删除主键索引表名因为主键只有一个这里值得注意的是如果主键自增长那么不能直接执行此操作自增长依赖于主键索引需要取消自增长再行删除重新定义字段但通常不会删除主键因为设计主键一定与业务逻辑无关创建索引时需要注意什么非空字段应该指定列为除非你想存储在中含有空值的列很难进行查询优化因为它们使得索引索引的统计信息以及比较运算更加复杂你应该用一个特殊的值或者一个空串代替空值取值离散大的字段变量各个取值之间的差异程度的列放到联合索引的前面可以通过函数查看字段的差异值返回值越大说明字段的唯一值越多字段的离散程度高索引字段越小越好数据库的数据存储以页为单位一页存储的数据越多一次操作获取的数据越大效率越高使用索引查询一定能提高查询的性能吗为什么通常通过索引查询数据比全表扫描要快但是我们也必须注意到它的代价索引需要空间来存储也需要定期维护每当有记录在表中增减或索引列被修改时索引本身也会被修改这意味着每条记录的将为此多付出次的磁盘因为索引需要额外的存储空间和处理那些不必要的索引反而会使查询反应时间变慢使用索引查询不一定能提高查询性能索引范围查询适用于两种情况基于一个范围的检索一般查询返回结果集小于表中记录数的基于非唯一性索引的检索百万级别或以上的数据如何删除关于索引由于索引需要额外的维护成本因为索引文件是单独存在的文件所以当我们对数据的增加修改删除都会产生额外的对索引文件的操作这些操作需要消耗额外的会降低增改删的执行效率所以在我们删除数据库百万级别数据的时候查询官方手册得知删除数据的速度和创建的索引数量是成正比的所以我们想要删除百万数据的时候可以先删除索引此时大概耗时三分多钟然后删除其中无用数据此过程需要不到两分钟删除完成后重新创建索引此时数据较少了创建索引也非常快约十分钟左右与之前的直接删除绝对是要快速很多更别说万一删除中断一切删除会回滚那更是坑了前缀索引语法使用字段值的前个字符建立索引默认是使用字段的全部内容建立索引前提前缀的标识度高比如密码就适合建立前缀索引因为密码几乎各不相同实操的难度在于前缀截取的长度我们可以利用通过从调整的值从自增查看不同前缀长度的一个平均匹配度接近时就可以了表示一个密码的前个字符几乎能确定唯一一条记录什么是最左前缀原则什么是最左匹配原则顾名思义就是最左优先在创建多列索引时要根据业务需求子句中使用最频繁的一列放在最左边最左前缀匹配原则非常重要的原则会一直向右匹配直到遇到范围查询就停止匹配比如如果建立顺序的索引是用不到索引的如果建立的索引则都可以用到的顺序可以任意调整和可以乱序比如建立索引可以任意顺序的查询优化器会帮你优化成索引可以识别的形式树和树的区别在树中你可以将键和值存放在内部节点和叶子节点但在树中内部节点都是键没有值叶子节点同时存放键和值树的叶子节点有一条链相连而树的叶子节点各自独立使用树的好处树可以在内部节点同时存储键和值因此把频繁访问的数据放在靠近根节点的地方将会大大提高热点数据的查询效率这种特性使得树在特定数据重复多次查询的场景中更加高效使用树的好处由于树的内部节点只存放键不存放值因此一次读取可以在内存页中获取更多的键有利于更快地缩小查找范围树的叶节点由一条链相连因此当需要进行一次全数据遍历的时候树只需要使用时间找到最小的一个节点然后通过链进行的顺序遍历即可而树则需要对树的每一层进行遍历这会需要更多的内存置换次数因此也就需要花费更多的时间索引和树所有有什么区别或者说优劣呢首先要知道索引和树索引的底层实现原理索引底层就是表进行查找时调用一次函数就可以获取到相应的键值之后进行回表查询获得实际数据树底层实现是多路平衡查找树对于每一次的查询都是从根节点出发查找到叶子节点方可以获得所查键值然后根据查询判断是否需要回表查询数据那么可以看出他们有以下的不同索引进行等值查询更快一般情况下但是却无法进行范围查询因为在索引中经过函数建立索引之后索引的顺序与原顺序无法保持一致不能支持范围查询而树的的所有节点皆遵循左节点小于父节点右节点大于父节点多叉树也类似天然支持范围索引不支持使用索引进行排序原理同上索引不支持模糊查询以及多列索引的最左前缀匹配原理也是因为函数的不可预测和的索引没有相关性索引任何时候都避免不了回表查询数据而树在符合某些条件聚簇索引覆盖索引等的时候可以只通过索引完成查询索引虽然在等值查询上较快但是不稳定性能不可预测当某个键值存在大量重复的时候发生碰撞此时效率可能极差而树的查询效率比较稳定对于所有的查询都是从根节点到叶子节点且树的高度较低因此在大多数情况下直接选择树索引可以获得稳定且较好的查询速度而不需要使用索引数据库为什么使用树而不是树树只适合随机检索而树同时支持随机检索和顺序检索树空间利用率更高可减少次数磁盘读写代价更低一般来说索引本身也很大不可能全部存储在内存中因此索引往往以索引文件的形式存储的磁盘上这样的话索引查找过程中就要产生磁盘消耗树的内部结点并没有指向关键字具体信息的指针只是作为索引使用其内部结点比树小盘块能容纳的结点中关键字数量更多一次性读入内存中可以查找的关键字也就越多相对的读写次数也就降低了而读写次数是影响索引检索效率的最大因素树的查询效率更加稳定树搜索有可能会在非叶子结点结束越靠近根节点的记录查找时间越短只要找到关键字即可确定记录的存在其性能等价于在关键字全集内做一次二分查找而在树中顺序检索比较明显随机检索时任何关键字的查找都必须走一条从根节点到叶节点的路所有关键字的查找路径长度相同导致每一个关键字的查询效率相当树在提高了磁盘性能的同时并没有解决元素遍历的效率低下的问题树的叶子节点使用指针顺序连接在一起只要遍历叶子节点就可以实现整棵树的遍历而且在数据库中基于范围的查询是非常频繁的而树不支持这样的操作增删文件节点时效率更高因为树的叶子节点包含所有关键字并以有序的链表结构存储这样可很好提高增删效率树在满足聚簇索引和覆盖索引的时候不需要回表查询数据在树的索引中叶子节点可能存储了当前的值也可能存储了当前的值以及整行的数据这就是聚簇索引和非聚簇索引在中只有主键索引是聚簇索引如果没有主键则挑选一个唯一键建立聚簇索引如果没有唯一键则隐式的生成一个键来建立聚簇索引当查询使用聚簇索引时在对应的叶子节点可以获取到整行数据因此不用再次进行回表查询什么是聚簇索引何时使用聚簇索引与非聚簇索引聚簇索引将数据存储与索引放到了一块找到索引也就找到了数据非聚簇索引将数据存储于索引分开结构索引结构的叶子节点指向了数据的对应行通过把索引先缓存到内存中当需要访问数据时通过索引访问数据在内存中直接搜索索引然后通过索引找到磁盘相应数据这也就是为什么索引不在命中时速度慢的原因非聚簇索引一定会回表查询吗不一定这涉及到查询语句所要求的字段是否全部命中了索引如果全部命中了索引那么就不必再进行回表查询举个简单的例子假设我们在员工表的年龄上建立了索引那么当进行的查询时在索引的叶子节点上已经包含了信息不会再次进行回表查询联合索引是什么为什么需要注意联合索引中的顺序可以使用多个字段同时建立一个索引叫做联合索引在联合索引中如果想要命中索引需要按照建立索引时的字段顺序挨个使用否则无法命中索引具体原因为使用索引时需要索引有序假设现在建立了的联合索引那么索引的排序为先按照排序如果相同则按照排序如果的值也相等则按照进行排序当进行查询时此时索引仅仅按照严格有序因此必须首先使用字段进行等值查询之后对于匹配到的列而言其按照字段严格有序此时可以使用字段用做索引查找以此类推因此在建立联合索引的时候应该注意索引列的顺序一般情况下将查询需求频繁或者字段选择性高的列放在前面此外可以根据特例的查询或者表结构进行单独的调整事务什么是事务事务是一个不可分割的数据库操作序列也是数据库并发控制的基本单位其执行的结果必须使数据库从一种一致性状态变到另一种一致性状态事务是指一个单元的工作要么全做要么全不做事务是逻辑上的一组操作保证一组数据的修改要么全部执行要么全部不执行举例事务最经典也经常被拿出来说例子就是转账了假如小明要给小红转账元这个转账会涉及到两个关键操作就是将小明的余额减少元将小红的余额增加元万一在这两个操作之间突然出现错误比如银行系统崩溃导致小明余额减少而小红的余额没有增加这样就不对了事务就是保证这两个关键操作要么都成功要么都要失败事物的四大特性介绍一下关系性数据库需要遵循规则具体内容如下原子性事务是最小的执行单位不允许分割事务的原子性确保动作要么全部完成要么完全不起作用一致性执行事务前后数据保持一致多个事务对同一个数据读取的结果是相同的隔离性并发访问数据库时一个用户的事务不被其他事务所干扰各并发事务之间数据库是独立的持久性一个事务被提交之后它对数据库中数据的改变是持久的即使数据库发生故障也不应该对其有任何影响什么是脏读幻读不可重复读脏读某个事务已更新一份数据另一个事务在此时读取了同一份数据由于某些原因前一个了操作则后一个事务所读取的数据就会是不正确的不可重复读在一个事务的两次查询之中数据不一致这可能是两次查询过程中间插入了一个事务更新的原有的数据幻读在一个事务的两次查询中数据笔数不一致例如有一个事务查询了几列数据而另一个事务却在此时插入了新的几列数据先前的事务在接下来的查询中就会发现有几列数据是它先前所没有的什么是事务的隔离级别的默认隔离级别是什么为了达到事务的四大特性数据库定义了种不同的事务隔离级别由低到高依次为这四个级别可以逐个解决脏读不可重复读幻读这几类问题标准定义了四个隔离级别读取未提交最低的隔离级别允许读取尚未提交的数据变更可能会导致脏读幻读或不可重复读读取已提交允许读取并发事务已经提交的数据可以阻止脏读但是幻读或不可重复读仍有可能发生可重复读对同一字段的多次读取结果都是一致的除非数据是被本身事务自己所修改可以阻止脏读和不可重复读但幻读仍有可能发生可串行化最高的隔离级别完全服从的隔离级别所有的事务依次逐个执行这样事务之间就完全不可能产生干扰也就是说该级别可以防止脏读不可重复读以及幻读事务的隔离级别有哪些事务隔离级别包括原子性即不可分割性事务要么全部被执行要么就全部不被执行一致性或可串性事务的执行使得数据库从一种正确状态转换成另一种正确状态隔离性在事务正确提交之前不允许把该事务对数据的任何改变提供给任何其他事务持久性事务正确提交后其结果将永久保存在数据库中即使在事务提交后有了其他故障事务的处理结果也会得到保存锁什么是锁在所有的中锁是实现事务的关键锁可以保证事务的完整性和并发性与现实生活中锁一样它可以是某些数据的拥有者在某段时间内不能使用某些数据或数据结构当然锁还分级别的隔离级别与锁的关系在级别下读取数据不需要加共享锁这样就不会跟被修改的数据上的排他锁冲突在级别下读操作需要加共享锁但是在语句执行完以后释放共享锁在级别下读操作需要加共享锁但是在事务提交之前并不释放共享锁也就是必须等待事务执行完毕以后才释放共享锁是限制性最强的隔离级别因为该级别锁定整个范围的键并一直持有锁直到事务完成按照锁的粒度分数据库锁有哪些锁机制与锁算法在关系型数据库中可以按照锁的粒度把数据库锁分为行级锁引擎表级锁引擎和页级锁引擎和存储引擎使用的锁采用表级锁支持行级锁和表级锁默认为行级锁行级锁表级锁和页级锁对比行级锁行级锁是中锁定粒度最细的一种锁表示只针对当前操作的行进行加锁行级锁能大大减少数据库操作的冲突其加锁粒度最小但加锁的开销也最大行级锁分为共享锁和排他锁特点开销大加锁慢会出现死锁锁定粒度最小发生锁冲突的概率最低并发度也最高表级锁表级锁是中锁定粒度最大的一种锁表示对当前操作的整张表加锁它实现简单资源消耗较少被大部分引擎支持最常使用的与都支持表级锁定表级锁定分为表共享读锁共享锁与表独占写锁排他锁特点开销小加锁快不会出现死锁锁定粒度大发出锁冲突的概率最高并发度最低页级锁页级锁是中锁定粒度介于行级锁和表级锁中间的一种锁表级锁速度快但冲突多行级冲突少但速度慢所以取了折衷的页级一次锁定相邻的一组记录特点开销和加锁时间界于表锁和行锁之间会出现死锁锁定粒度界于表锁和行锁之间并发度一般从锁的类别上分都有哪些锁呢像上面那样子进行锁定岂不是有点阻碍并发效率了从锁的类别上来讲有共享锁和排他锁共享锁又叫做读锁当用户要进行数据的读取时对数据加上共享锁共享锁可以同时加上多个排他锁又叫做写锁当用户要进行数据的写入时对数据加上排他锁排他锁只可以加一个他和其他的排他锁共享锁都相斥用上面的例子来说就是用户的行为有两种一种是来看房多个用户一起看房是可以接受的一种是真正的入住一晚在这期间无论是想入住的还是想看房的都不可以锁的粒度取决于具体的存储引擎实现了行级锁页级锁表级锁他们的加锁开销从大到小并发能力也是从大到小中引擎的行锁是怎么实现的答是基于索引来完成行锁例可以根据条件来完成行锁锁定并且是有索引键的列如果不是索引键那么将完成表锁并发将无从谈起存储引擎的锁的算法有三种单个行记录上的锁间隙锁锁定一个范围不包括记录本身锁定一个范围包含记录本身相关知识点对于行的查询使用为了解决幻读问题当查询的索引含有唯一属性时将降级为锁设计的目的是为了阻止多个事务将记录插入到同一范围内而这会导致幻读问题的产生有两种方式显式关闭锁除了外键约束和唯一性检查外其余情况仅使用将事务隔离级别设置为将参数设置为什么是死锁怎么解决死锁是指两个或多个事务在同一资源上相互占用并请求锁定对方的资源从而导致恶性循环的现象常见的解决死锁的方法如果不同程序会并发存取多个表尽量约定以相同的顺序访问表可以大大降低死锁机会在同一个事务中尽可能做到一次锁定所需要的所有资源减少死锁产生概率对于非常容易产生死锁的业务部分可以尝试使用升级锁定颗粒度通过表级锁定来减少死锁产生的概率如果业务处理不好可以用分布式事务锁或者使用乐观锁数据库的乐观锁和悲观锁是什么怎么实现的数据库管理系统中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性乐观并发控制乐观锁和悲观并发控制悲观锁是并发控制主要采用的技术手段悲观锁假定会发生并发冲突屏蔽一切可能违反数据完整性的操作在查询完数据的时候就把事务锁起来直到提交事务实现方式使用数据库中的锁机制乐观锁假设不会发生并发冲突只在提交操作时检查是否违反数据完整性在修改数据的时候把事务锁起来通过的方式来进行锁定实现方式乐一般会使用版本号机制或算法实现两种锁的使用场景从上面对两种锁的介绍我们知道两种锁各有优缺点不可认为一种好于另一种像乐观锁适用于写比较少的情况下多读场景即冲突真的很少发生的时候这样可以省去了锁的开销加大了系统的整个吞吐量但如果是多写的情况一般会经常产生冲突这就会导致上层应用会不断的进行这样反倒是降低了性能所以一般多写的场景下用悲观锁就比较合适视图为什么要使用视图为了提高复杂语句的复用性和表操作的安全性数据库管理系统提供了视图特性视图使得开发者只关心感兴趣的某些特定数据和所负责的特定任务只能看到视图中所定义的数据而不是视图所引用表中的数据从而提高了数据库中数据的安全性什么是视图视图本质上是一种虚拟表在物理上是不存在的具有和物理表相同的功能其内容与真实的表相似包含一系列带有名称的列和行数据可以对视图进行增改查操作但是视图并不在数据库中以储存的数据值形式存在行和列数据来自定义视图的查询所引用基本表并且在具体引用视图时动态生成视图有哪些特点视图的特点如下视图的列可以来自不同的表是表的抽象和在逻辑意义上建立的新关系视图是由基本表实表产生的表虚表视图的建立和删除不影响基本表对视图内容的更新添加删除和修改直接影响基本表当视图来自多个基本表时不允许添加和删除数据视图的操作包括创建视图查看视图删除视图和修改视图视图的使用场景有哪些视图根本用途简化查询提高开发效率如果说还有另外一个用途那就是兼容老的表结构下面是视图的常见使用场景重用语句简化复杂的操作在编写查询后可以方便的重用它而不必知道它的基本查询细节使用表的组成部分而不是整个表保护数据可以给用户授予表的特定部分的访问权限而不是整个表的访问权限更改数据格式和表示视图可返回与底层表的表示和格式不同的数据视图的优点查询简单化视图能简化用户的操作数据安全性视图使用户能以多种角度看待同一数据能够对机密数据提供安全保护逻辑数据独立性视图对重构数据库提供了一定程度的逻辑独立性视图的缺点性能数据库必须把视图的查询转化成对基本表的查询如果这个视图是由一个复杂的多表查询所定义那么即使是视图的一个简单查询数据库也把它变成一个复杂的结合体需要花费一定的时间修改限制当用户试图修改视图的某些行时数据库必须把它转化为对基本表的某些行的修改事实上当从视图中插入或者删除时情况也是这样对于简单视图来说这是很方便的但是对于比较复杂的视图可能是不可修改的表和视图的关系视图其实就是一条查询语句用于显示一个或多个表或其他视图中的相关数据表就是关系数据库中实际存储数据用的什么是游标游标是系统为用户开设的一个数据缓冲区存放语句的执行结果每个游标区都有一个名字用户可以通过游标逐一获取记录并赋给主变量交由主语言进一步处理存储过程与函数什么是存储过程存储过程是一个预编译的语句优点是允许模块化的设计就是说只需要创建一次以后在该程序中就可以调用多次如果某次操作需要执行多次使用存储过程比单纯语句执行要快存储过程用什么来调用可以用一个命令对象来调用存储过程可以供外部程序调用比如程序存储过程的优缺点优点存储过程是预编译过的执行效率高存储过程的代码直接存放于数据库中通过存储过程名直接调用减少网络通讯安全性高执行存储过程需要有一定权限的用户存储过程可以重复使用减少数据库开发人员的工作量缺点调试麻烦但是用调试很方便弥补这个缺点移植性差数据库端代码当然是与数据库相关的但是如果是做工程型项目基本不存在移植问题重新编译问题因为后端代码是运行前编译的如果带有引用关系的对象发生改变时受影响的存储过程包将需要重新编译不过也可以设置成运行时刻自动编译如果在一个程序系统中大量的使用存储过程到程序交付使用的时候随着用户需求的增加会导致数据结构的变化接着就是系统的相关问题了最后如果用户想维护该系统可以说是很难很难而且代价是空前的维护起来更麻烦存储过程与函数的区别存储过程函数用于在数据库中完成特定的操作或者任务如插入删除等用于特定的数据如选择程序头部声明用程序头部声明用程序头部声明时不需描述返回类型程序头部声明时要描述返回类型而且块中至少要包括一个有效的语句可以使用三种模式的参数可以使用三种模式的参数可作为一个独立的语句来执行不能独立执行必须作为表达式的一部分调用可以通过返回零个或多个值通过语句返回一个值且改值要与声明部分一致也可以是通过类型的参数带出的变量语句或中不可调用存储过程语句或中可以调用函数触发器什么是触发器触发器是用户定义在关系表上的一类由事件驱动的特殊的存储过程触发器是指一段代码当触发某个事件时自动执行这些代码主要是通过事件来触发而被执行的它可以强化约束来维护数据的完整性和一致性可以跟踪数据库内的操作从而不允许未经许可的更新和变化可以联级运算如某表上的触发器上包含对另一个表的数据操作而该操作又会导致该表触发器被触发触发器的使用场景有哪些可以通过数据库中的相关表实现级联更改实时监控某张表中的某个字段的更改而需要做出相应的处理例如可以生成某些业务的编号注意不要滥用否则会造成数据库及应用程序的维护困难大家需要牢记以上基础知识点重点是理解数据类型和的差异表存储引擎和的区别中都有哪些触发器在数据库中有如下六种触发器事前触发和事后触发有什么区别事前触发器运行于触发事件发生之前而事后触发器运行于触发事件发生之后通常事前触发器可以获取事件之前和新的字段值语句级触发和行级触发有何区别语句级触发器可以在语句执行前或后执行而行级触发在触发器所影响的每一行触发一次",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-08-30 01:32:21",postMainColor:""}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise(((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach((e=>{c.setAttribute(e,t[e])})),document.head.appendChild(c)})),e.getCSS=(e,t=!1)=>new Promise(((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)})),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#18171d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#f7f9fe")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="公爵书房" type="application/atom+xml"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.gjcloak.top/" title="引导"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" alt="引导"><span class="back-menu-item-text">引导</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://beta.gjcloak.top/" title="导航"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" alt="导航"><span class="back-menu-item-text">导航</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">公爵书房</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i> <span>虫洞</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=156642394&amp;server=netease&amp;type=playlist/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i> <span>追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/atlas/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://memos.gjcloak.top/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size:.9em"></i> <span>我的哔哔</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/goods/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的好物</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i> <span>搜索</span></a></div><input id="center-console" type="checkbox"><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole()"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://cdn.gjcloak.xyz/images/微信无金额.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.gjcloak.xyz/images/微信无金额.png"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.gjcloak.xyz/images/QQ.png" target="_blank"><img class="post-qr-code-img" alt="QQ" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.gjcloak.xyz/images/QQ.png"></a><div class="post-qr-code-desc">QQ</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title">最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anaconda/" style="font-size:1.05rem">Anaconda<sup>1</sup></a><a href="/tags/Berserker/" style="font-size:1.05rem">Berserker<sup>1</sup></a><a href="/tags/EU4/" style="font-size:1.05rem">EU4<sup>26</sup></a><a href="/tags/fate/" style="font-size:1.05rem">fate<sup>1</sup></a><a href="/tags/pixiv/" style="font-size:1.05rem">pixiv<sup>1</sup></a><a href="/tags/poxiv/" style="font-size:1.05rem">poxiv<sup>1</sup></a><a href="/tags/p%E7%AB%99/" style="font-size:1.05rem">p站<sup>6</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B/" style="font-size:1.05rem">业务流程<sup>1</sup></a><a href="/tags/%E4%B8%AD%E7%BA%A7/" style="font-size:1.05rem">中级<sup>1</sup></a><a href="/tags/%E4%B8%BB%E6%B5%81%E7%A4%BE%E4%BA%A4%E5%AA%92%E4%BD%93%E5%B9%B3%E5%8F%B0/" style="font-size:1.05rem">主流社交媒体平台<sup>1</sup></a><a href="/tags/%E4%BA%8C%E6%AC%A1%E5%85%83/" style="font-size:1.05rem">二次元<sup>2</sup></a><a href="/tags/%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/" style="font-size:1.05rem">入门指南<sup>3</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size:1.05rem">分享<sup>23</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size:1.05rem">动漫<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size:1.05rem">博客<sup>8</sup></a><a href="/tags/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96/" style="font-size:1.05rem">去中心化<sup>4</sup></a><a href="/tags/%E5%9B%BE%E7%89%87/" style="font-size:1.05rem">图片<sup>3</sup></a><a href="/tags/%E5%A3%81%E7%BA%B8/" style="font-size:1.05rem">壁纸<sup>3</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size:1.05rem">学习笔记<sup>31</sup></a><a href="/tags/%E6%8F%92%E7%94%BB/" style="font-size:1.05rem">插画<sup>6</sup></a><a href="/tags/%E6%90%AD%E5%BB%BA/" style="font-size:1.05rem">搭建<sup>5</sup></a><a href="/tags/%E6%94%B9%E6%B4%BE/" style="font-size:1.05rem">改派<sup>3</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" style="font-size:1.05rem">更新日志<sup>3</sup></a><a href="/tags/%E6%AC%A7%E9%99%86%E9%A3%8E%E4%BA%914/" style="font-size:1.05rem">欧陆风云4<sup>25</sup></a><a href="/tags/%E7%94%A8%E6%88%B7/" style="font-size:1.05rem">用户<sup>1</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:1.05rem">笔记<sup>8</sup></a><a href="/tags/%E7%BE%8E%E5%9B%BE/" style="font-size:1.05rem">美图<sup>1</sup></a><a href="/tags/%E8%87%AA%E5%BB%BA%E5%9B%BD/" style="font-size:1.05rem">自建国<sup>1</sup></a><a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size:1.05rem">阅读<sup>2</sup></a><a href="/tags/%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" style="font-size:1.05rem">需求分析<sup>2</sup></a></div></div><hr></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多"><i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">45</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">17</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%88%86%E4%BA%AB/" itemprop="url">分享</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" tabindex="-1" itemprop="url"><span><i class="anzhiyufont anzhiyu-icon-hashtag"></i> 面试题</span></a><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url"><span><i class="anzhiyufont anzhiyu-icon-hashtag"></i> 数据库</span></a></span></div></div><h1 class="post-title" itemprop="name headline">数据库面试题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-10-20T22:08:21.000Z" title="发表于 2022-10-20 22:08:21">2022-10-20</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-08-30T01:32:21.649Z" title="更新于 2023-08-30 01:32:21">2023-08-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">18.8k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>58分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" data-flag-title="数据库面试题"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator"></span><span class="post-meta-position" title="作者IP属地为厦门"><i class="anzhiyufont anzhiyu-icon-location-dot"></i> 厦门</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cos.gjcloak.xyz/pigo/202208191053083.jpeg?imageMogr2/format/webp/interlace/1/quality/0"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.gjcloak.top/d4eb4c98.html"><header><a class="post-meta-categories" href="/categories/%E5%88%86%E4%BA%AB/" itemprop="url">分享</a><a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" tabindex="-1" itemprop="url">面试题</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url">数据库</a><h1 id="CrawlerTitle" itemprop="name headline">数据库面试题</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">公爵</span><time itemprop="dateCreated datePublished" datetime="2022-10-20T22:08:21.000Z" title="发表于 2022-10-20 22:08:21">2022-10-20</time><time itemprop="dateCreated datePublished" datetime="2023-08-30T01:32:21.649Z" title="更新于 2023-08-30 01:32:21">2023-08-30</time></header><h2 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="数据库基础知识"></a>数据库基础知识</h2><h3 id="为什么要使用数据库"><a href="#为什么要使用数据库" class="headerlink" title="为什么要使用数据库"></a>为什么要使用数据库</h3><blockquote><p>答题思路一：内存、文件和数据库的比较</p></blockquote><p>如果将<strong>数据保存在内存</strong>中，虽然说存取速度快，但是会导致数据不能永久的保存。</p><p>如果将<strong>数据保存在文件</strong>中，可以解决数据永久保存的问题，但是却引发了新的问题：速度比内存操作慢，频繁的 IO 操作，而且查询数据不方便。</p><p>但是将<strong>数据保存在数据库</strong>中，完美的解决了以上所有问题：数据可以永久保存，通过使用 SQL 语句，使得查询方便效率高，并且管理数据方便。</p><p>所以要使用数据库。</p><blockquote><p>答题思路二：使用数据库的好处</p></blockquote><ul><li>支持数据的独立性和有效访问</li><li>减少了应用开发时间</li><li>支持对数据完整性和安全性的控制</li><li>支持并发访问</li><li>支持对故障的恢复</li></ul><h3 id="数据库的发展阶段-⭐"><a href="#数据库的发展阶段-⭐" class="headerlink" title="数据库的发展阶段 ⭐"></a>数据库的发展阶段 ⭐</h3><p>人工管理阶段&gt;&gt;文件系统阶段&gt;&gt;数据库系统阶段</p><h3 id="文件系统与数据库系统之间的比较"><a href="#文件系统与数据库系统之间的比较" class="headerlink" title="文件系统与数据库系统之间的比较"></a>文件系统与数据库系统之间的比较</h3><ul><li>数据库可以通过 DBMS 直接进行很多操作，而文件的话只提供了简单的操作。</li><li>用文件的话，要针对不同的文件结构编写不同的代码。</li><li>由于实际应用中并发同时访问导致数据访问不一致。【文件没有解决办法，需要在应用软件层解决，而 DBMS 中有】</li><li>故障处理【文件系统不具备这个能力，但DBMS会自动恢复】</li><li>安全和访问控制</li></ul><h3 id="什么是数据库系统"><a href="#什么是数据库系统" class="headerlink" title="什么是数据库系统"></a>什么是数据库系统</h3><p>在计算机系统中引入数据库后的系统。它是由数据库、数据库用户、计算机软硬件、数据库管理员构成。</p><h3 id="什么是数据库"><a href="#什么是数据库" class="headerlink" title="什么是数据库"></a>什么是数据库</h3><p>数据库是长期存在计算机内、有组织的、可共享数据集合。</p><h3 id="什么是数据库的约束"><a href="#什么是数据库的约束" class="headerlink" title="什么是数据库的约束"></a>什么是数据库的约束</h3><p>NULL&#x2F;NOT NULL 约束、UNIQUE 约束、PRIMARY KEY 约束、FOREIGN KEY 约束、CHECK 约束</p><h3 id="什么是数据库管理系统"><a href="#什么是数据库管理系统" class="headerlink" title="什么是数据库管理系统"></a>什么是数据库管理系统</h3><p>用于用户与操作系统之间的一层数据管理软件</p><h3 id="什么是数据模型"><a href="#什么是数据模型" class="headerlink" title="什么是数据模型"></a>什么是数据模型</h3><p>数据模型是一种标识实体类型及其实体间联系的模型。典型的数据模型有网状模型、层次模型和关系模型。</p><h3 id="什么是规范化"><a href="#什么是规范化" class="headerlink" title="什么是规范化"></a>什么是规范化</h3><p>从关系数据库的表中，除去冗余数据的过程称为规范化。包括：精简数据库的结构，从表中删除冗余的列，标识所有依赖于其它数据的数据</p><h3 id="简述数据库的三级模式结构"><a href="#简述数据库的三级模式结构" class="headerlink" title="简述数据库的三级模式结构"></a>简述数据库的三级模式结构</h3><ul><li><strong>内模式</strong>：也称存储模式。数据物理结构和存储方式的描述，是数据在数据库中的组织方式</li><li><strong>模式</strong>：也称逻辑模式。是数据库中全体数据成员的逻辑结构和特征的描述</li><li><strong>外模式</strong>：也称用户模式。是数据库用户能看见和使用的局部数据的逻辑结构和特征的描述</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/NoteBook/20200509142722.png" alt="数据库系统的三级模式结构" title="数据库系统的三级模式结构"></p><h3 id="数据库系统的生命周期"><a href="#数据库系统的生命周期" class="headerlink" title="数据库系统的生命周期"></a>数据库系统的生命周期</h3><ul><li>数据库系统的规划阶段</li><li>数据库设计</li><li>在数据库内创建加载数据</li><li>基于数据库开发应用程序、管理和维护</li><li>数据库重构</li></ul><h3 id="什么是-SQL？"><a href="#什么是-SQL？" class="headerlink" title="什么是 SQL？"></a>什么是 SQL？</h3><p>结构化查询语言（Structured Query Language）简称 SQL，是一种数据库查询语言。</p><p>作用：用于存取数据、查询、更新和管理关系数据库系统。</p><h3 id="什么是-MySQL"><a href="#什么是-MySQL" class="headerlink" title="什么是 MySQL?"></a>什么是 MySQL?</h3><p>MySQL是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，属于 Oracle 旗下产品。MySQL 是最流行的关系型数据库管理系统之一，在 WEB 应用方面，MySQL 是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。在 Java 企业级开发中非常常用，因为 MySQL 是开源免费的，并且方便扩展。</p><h3 id="范式的定义-⭐"><a href="#范式的定义-⭐" class="headerlink" title="范式的定义 ⭐"></a>范式的定义 ⭐</h3><p>改造关系模式，通过分解关系模型来消除其中不合适的数据依赖，以决绝插入异常，删除异常，数据用余。</p><h3 id="数据库三大范式是什么"><a href="#数据库三大范式是什么" class="headerlink" title="数据库三大范式是什么"></a>数据库三大范式是什么</h3><p>第一范式（1NF）：关系模式 R 中每个列都不可以再拆分。</p><p>第二范式（2NF）：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。</p><p>第三范式：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。</p><p>在设计数据库结构的时候，要尽量遵守三范式，如果不遵守，必须有足够的理由。比如性能。事实上我们经常会为了性能而妥协数据库的设计。</p><h3 id="mysql有关权限的表都有哪几个"><a href="#mysql有关权限的表都有哪几个" class="headerlink" title="mysql有关权限的表都有哪几个"></a>mysql有关权限的表都有哪几个</h3><blockquote><p>MySQL服务器通过权限表来控制用户对数据库的访问，权限表存放在mysql数据库里，由mysql_install_db脚本初始化。这些权限表分别user，db，table_priv，columns_priv和host。下面分别介绍一下这些表的结构和内容：</p><p>user权限表：记录允许连接到服务器的用户帐号信息，里面的权限是全局级的。<br>db权限表：记录各个帐号在各个数据库上的操作权限。<br>table_priv权限表：记录数据表级的操作权限。<br>columns_priv权限表：记录数据列级的操作权限。<br>host权限表：配合db权限表对给定主机上数据库级操作权限作更细致的控制。这个权限表不受GRANT和REVOKE语句的影响。</p></blockquote><h3 id="MySQL的binlog有有几种录入格式？分别有什么区别？"><a href="#MySQL的binlog有有几种录入格式？分别有什么区别？" class="headerlink" title="MySQL的binlog有有几种录入格式？分别有什么区别？"></a>MySQL的binlog有有几种录入格式？分别有什么区别？</h3><blockquote><p>有三种格式，statement，row和mixed。</p><p>statement模式下，每一条会修改数据的sql都会记录在binlog中。不需要记录每一行的变化，减少了binlog日志量，节约了IO，提高性能。由于sql的执行是有上下文的，因此在保存的时候需要保存相关的信息，同时还有一些使用了函数之类的语句无法被记录复制。<br>row级别下，不记录sql语句上下文相关信息，仅保存哪条记录被修改。记录单元为每一行的改动，基本是可以全部记下来但是由于很多操作，会导致大量行的改动(比如alter table)，因此这种模式的文件保存的信息太多，日志量太大。<br>mixed，一种折中的方案，普通操作使用statement记录，当无法使用statement的时候使用row。<br>此外，新版的MySQL中对row级别也做了一些优化，当表结构发生变化的时候，会记录语句而不是逐行记录。</p></blockquote><h3 id="什么是数据字典"><a href="#什么是数据字典" class="headerlink" title="什么是数据字典"></a>什么是数据字典</h3><p>数据字典是关系数据库管理系统内部的一组系统表，它<strong>记录了数据库中所有的定义信息</strong>，包括关系模式定义、视图定义、索引定义、完整性约束定义、各类用户对数据库的操作权限、统计信息等。<strong>关系数据库管理系统在执行 SQL 的数据定义语句时，实际上就是在更新数据字典中的相应信息</strong></p><h3 id="Oracle-和-MySQL-的区别"><a href="#Oracle-和-MySQL-的区别" class="headerlink" title="Oracle 和 MySQL 的区别"></a>Oracle 和 MySQL 的区别</h3><p>（1）库函数不同。</p><p>（2）Oracle 是用表空间来管理的，MySQL 不是。</p><p>（3）显示当前所有的表、用户、改变连接用户、显示当前连接用户、执行外部脚本的语句的不同。</p><p>（4）分页查询时候时候，MySQL 用 limit ，Oracle用rownum。</p><p>（5）SQL 的语法的不同。</p><h3 id="数据库和非关系型数据库比较"><a href="#数据库和非关系型数据库比较" class="headerlink" title="数据库和非关系型数据库比较"></a>数据库和非关系型数据库比较</h3><h2 id="关系数据库"><a href="#关系数据库" class="headerlink" title="关系数据库"></a>关系数据库</h2><h3 id="关系型数据库和非关系型数据库比较"><a href="#关系型数据库和非关系型数据库比较" class="headerlink" title="关系型数据库和非关系型数据库比较"></a>关系型数据库和非关系型数据库比较</h3><p><strong>关系型数据库</strong>：</p><ul><li>采用了关系模型来组织数据的数据库，以行和列形式存储数据，以便于用户理解。</li><li>通用的 SQL 语言使得操作关系型数据库非常方便。</li><li>关系型数据库遵循 ACID 原则。</li><li>常见的关系型数据库比如 MySQL，Oracle</li></ul><p><strong>关系型数据库存在的问题</strong>：</p><ul><li>网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘 I&#x2F;O 是一个很大的瓶颈</li><li>网站每天产生的数据量是巨大的，对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的。因此，关系型数据不适合持久存储海量数据</li><li>很难进行横向扩展（增加服务器），也就是说想要提高数据处理能力，要使用性能更好的计算机（纵向扩展）</li><li>性能欠佳：导致关系型数据库性能欠佳的最主要原因就是多表的关联查询，为了保证数据库的ACID特性，必须尽量按照范式要求设计数据库，关系数据库中的表存储的往往是一个固定的、格式化的数据结构</li></ul><p>而非关系型数据库就可以很好的解决关系型数据库很难解决的大数据问题</p><p><strong>非关系型数据库 NoSQL</strong>：</p><ul><li>非关系型数据库以键值对存储，且结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，不局限于固定的结构，可以减少一些时间和空间的开销。</li><li>支持分布式存储，容易进行横向扩展</li><li>不遵循 ACID 特性（不提供对事务的处理）</li><li>常见的非关系型数据库比如 Redis、MongoDB、Elasticsearch</li></ul><h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><p>① 概述</p><p>数据库连接池是负责分配、管理和释放数据库连接，它<strong>允许应用程序重复使用一个现有的数据库连接</strong>，而不是每次访问数据库的时候都需要重新建立一次连接。</p><p>② 为什么要使用连接池</p><p>数据库连接是一种关键的有限的昂贵的资源，这一点在多用户的网页应用程序中体现得尤为突出。 一个数据库连接对象均对应一个物理数据库连接，每次操作都打开一个物理连接，使用完都关闭连接，这样造成系统的性能低下。</p><p>数据库连接池的解决方案是在应用程序启动时建立足够的数据库连接，并将这些连接组成一个连接池，由应用程序动态地对池中的连接进行申请、使用和释放。对于多于连接池中连接数的并发请求，应该在请求队列中排队等待。并且应用程序可以根据池中连接的使用率，动态增加或减少池中的连接数。</p><p>连接池技术尽可能多地重用了消耗内存地资源，大大节省了内存，提高了服务器地服务效率，能够支持更多的客户服务。通过使用连接池，将大大提高程序运行效率，同时，我们可以通过其自身的管理机制来监视数据库连接的数量、使用情况等。</p><p>③ 传统的连接机制与连接池运行机制区别</p><p>执行一个 SQL 命令</p><p><strong>不使用数据库连接池的步骤</strong>：</p><ul><li>TCP建立连接三次握手</li><li>MySQL认证三次握手</li><li>真正的SQL执行</li><li>MySQL关闭</li><li>TCP四次握手关闭</li></ul><p>可以看到，为了执行一条SQL，却多了非常多网络交互，应用需要频繁的创建连接和关闭连接。</p><p><strong>使用数据库连接池的步骤</strong>：</p><p>第一次访问的时候，需要建立连接。 但是之后的访问，均会复用之前创建的连接，直接执行SQL语句。</p><h3 id="列举几种表连接方式"><a href="#列举几种表连接方式" class="headerlink" title="列举几种表连接方式"></a>列举几种表连接方式</h3><p>内连接、自连接、外连接（左、右、全）、交叉连接</p><h3 id="什么是内连接、外连接、交叉连接"><a href="#什么是内连接、外连接、交叉连接" class="headerlink" title="什么是内连接、外连接、交叉连接"></a>什么是内连接、外连接、交叉连接</h3><ul><li><strong>内连接 inner join:</strong> 只连接匹配的行（默认），只有两个元素表相匹配的才能在结果集中显示</li><li><strong>左外连接 left outer join:</strong> 左边为驱动表，驱动表的数据全部显示，匹配表的不匹配的不会显示。</li><li><strong>右外连接 right outer join:</strong> 右边为驱动表，驱动表的数据全部显示，匹配表的不匹配的不会显示</li><li><strong>全外连接 outer join:</strong> 连接的表中不匹配的数据全部会显示出来。</li><li><strong>交叉连接 cross join:</strong> 生成笛卡尔积，它不使用任何匹配或者选取条件，而是直接将一个数据源中的每个行与另一个数据源的每个行都匹配，显示的结果是连接表数的乘积。</li></ul><h3 id="超键、候选键、主键、外键分别是什么"><a href="#超键、候选键、主键、外键分别是什么" class="headerlink" title="超键、候选键、主键、外键分别是什么"></a>超键、候选键、主键、外键分别是什么</h3><ul><li><strong>超键</strong>：在关系中能唯一标识元组的属性集称为关系模式的超键。一个属性可以为作为一个超键，多个属性组合在一起也可以作为一个超键。超键包含候选键和主键。</li><li><strong>候选键</strong>：即最小超键，即没有冗余元素的超键。候选键中的元素称为<strong>主属性</strong></li><li><strong>主键</strong>：候选键中选出一个作为主键，一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。</li><li><strong>外键</strong>：在一个表中存在的另一个表的主键称此表的外键。</li></ul><h3 id="主键和外键的区别"><a href="#主键和外键的区别" class="headerlink" title="主键和外键的区别"></a>主键和外键的区别</h3><p>主键在本表中是唯一的、不可为空的，外键可以重复可以为空；外键和另一张表的主键关联，不能创建对应表中不存在的外键。</p><h3 id="如何维护数据库的完整性和一致性"><a href="#如何维护数据库的完整性和一致性" class="headerlink" title="如何维护数据库的完整性和一致性"></a>如何维护数据库的完整性和一致性</h3><p>尽可能使用约束，如check,主键，外键，非空字段等来约束，这样做效率最高，也最方便。其次是使用触发器，这种方法可以保证，无论什么业务系统务逻辑，但这样做麻烦，编程复杂，效率低下。</p><h3 id="什么是主码-什么是外码"><a href="#什么是主码-什么是外码" class="headerlink" title="什么是主码?什么是外码"></a>什么是主码?什么是外码</h3><p>若关系中某一属性组的值能唯一地标识一个元组，而其子集不能，则称该属性组为候选码，若一个关系有多个候选码，则选定其中一个为主码。</p><p>如果F是基本关系R的一个或一组属性，但不是关系R的码，Ks是基本关系S的主码。如果F与Ks相对应，则称F是R的外码。</p><h3 id="完整性约束"><a href="#完整性约束" class="headerlink" title="完整性约束"></a>完整性约束</h3><p>数据库的完整性是指数据的正确性和相容性。数据的正确性是指数据是符合现实世界语义、反映当前实际状况的。数据的相容性是指数据库同一对象在不同关系表中的数据是符合逻辑的。</p><p>l 实体完整性：若属性A是基本关系B的主属性，则A不能取空值（所谓空值是指不知道，不存在，无意义的值）</p><p>l 参照完整性：若属性F是基本关系R的外码，它与基本关系S的主码Ks相对应，则对于R中每个元组在F上的值必须：</p><p>² 或者取空值（F的每个属性值均为空值）</p><p>² 或者等于S中某个元组的主码值</p><p>（某个同学班长属性可以是尚为选出班长，也可以是本关系中某个元组的学号值）</p><p>l 用户定义完整性：针对某一具体关系数据库的约束条件，反映某一具体应用涉及的数据必须满足的语义要求（如某个属性必须取唯一值，某个非主属性不能取空值）</p><h2 id="常用-SQL-语句"><a href="#常用-SQL-语句" class="headerlink" title="常用 SQL 语句"></a>常用 SQL 语句</h2><h3 id="SQL-的四个组成部分-⭐"><a href="#SQL-的四个组成部分-⭐" class="headerlink" title="SQL 的四个组成部分 ⭐"></a>SQL 的四个组成部分 ⭐</h3><p>1、数据库模式定义语言DDL：create用来创建数据库中的各种对象——表、视图、索引、同义词、聚簇等</p><p>2、数据查询语言dql：基本结构是由SELECT子句，FROM子句和WHERE子句组成的查询块</p><p>3、数据操纵语言dml：插入INSERT、更新UPDATE和删除DELETE</p><p>4、数据控制语言dcl：用来授予或回收访问数据库的某种特权，并控制数据库操纵事物发生的时间和效果，对数据库实行监视等</p><h3 id="SQL-约束有哪几种？"><a href="#SQL-约束有哪几种？" class="headerlink" title="SQL 约束有哪几种？"></a>SQL 约束有哪几种？</h3><blockquote><p>NOT NULL: 用于控制字段的内容一定不能为空（NULL）。<br>UNIQUE: 控件字段内容不能重复，一个表允许有多个 Unique 约束。<br>PRIMARY KEY: 也是用于控件字段内容不能重复，但它在一个表只允许出现一个。<br>FOREIGN KEY: 用于预防破坏表之间连接的动作，也能防止非法数据插入外键列，因为它必须是它指向的那个表中的值之一。<br>CHECK: 用于控制字段的值范围。</p></blockquote><h3 id="六种关联查询"><a href="#六种关联查询" class="headerlink" title="六种关联查询"></a>六种关联查询</h3><blockquote><ul><li>交叉连接（CROSS JOIN）</li><li>内连接（INNER JOIN）</li><li>外连接（LEFT JOIN&#x2F;RIGHT JOIN）</li><li>联合查询（UNION与UNION ALL）</li><li>全连接（FULL JOIN）</li><li>交叉连接（CROSS JOIN）</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM A,B(,C)或者SELECT * FROM A CROSS JOIN B (CROSS JOIN C)#没有任何关联条件，结果是笛卡尔积，结果集会很大，没有意义，很少使用内连接（INNER JOIN）SELECT * FROM A,B WHERE A.id=B.id或者SELECT * FROM A INNER JOIN B ON A.id=B.id多表中同时符合某种条件的数据记录的集合，INNER JOIN可以缩写为JOIN</span><br></pre></td></tr></table></figure><p>内连接分为三类</p><p>等值连接：ON A.id&#x3D;B.id<br>不等值连接：ON A.id &gt; B.id<br>自连接：SELECT * FROM A T1 INNER JOIN A T2 ON T1.id&#x3D;T2.pid<br>外连接（LEFT JOIN&#x2F;RIGHT JOIN）</p><p>左外连接：LEFT OUTER JOIN, 以左表为主，先查询出左表，按照ON后的关联条件匹配右表，没有匹配到的用NULL填充，可以简写成LEFT JOIN<br>右外连接：RIGHT OUTER JOIN, 以右表为主，先查询出右表，按照ON后的关联条件匹配左表，没有匹配到的用NULL填充，可以简写成RIGHT JOIN<br>联合查询（UNION与UNION ALL）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM A UNION SELECT * FROM B UNION ...</span><br></pre></td></tr></table></figure><p>就是把多个结果集集中在一起，UNION前的结果为基准，需要注意的是联合查询的列数要相等，相同的记录行会合并<br>如果使用UNION ALL，不会合并重复的记录行<br>效率 UNION 高于 UNION ALL<br>全连接（FULL JOIN）</p><p>MySQL不支持全连接<br>可以使用LEFT JOIN 和UNION和RIGHT JOIN联合使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM A LEFT JOIN B ON A.id=B.id UNIONSELECT * FROM A RIGHT JOIN B ON A.id=B.id</span><br></pre></td></tr></table></figure><h3 id="什么是子查询"><a href="#什么是子查询" class="headerlink" title="什么是子查询"></a>什么是子查询</h3><blockquote><ol><li>条件：一条SQL语句的查询结果做为另一条查询语句的条件或查询结果</li><li>嵌套：多条SQL语句嵌套使用，内部的SQL查询语句称为子查询。</li></ol></blockquote><h3 id="子查询的三种情况"><a href="#子查询的三种情况" class="headerlink" title="子查询的三种情况"></a>子查询的三种情况</h3><ul><li>子查询是单行单列的情况：结果集是一个值，父查询使用：&#x3D;、 &lt;、 &gt; 等运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询工资最高的员工是谁？ </span><br><span class="line">select  * from employee where salary=(select max(salary) from employee);   </span><br></pre></td></tr></table></figure><ul><li>子查询是多行单列的情况：结果集类似于一个数组，父查询使用：in 运算符</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询工资最高的员工是谁？ </span><br><span class="line">select  * from employee where salary=(select max(salary) from employee);    </span><br></pre></td></tr></table></figure><ul><li>子查询是多行多列的情况：结果集类似于一张虚拟表，不能用于where条件，用于select子句中做为子表</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 1) 查询出2011年以后入职的员工信息</span><br><span class="line">-- 2) 查询所有的部门信息，与上面的虚拟表中的信息比对，找出所有部门ID相等的员工。</span><br><span class="line">select * from dept d,  (select * from employee where join_date &gt; &#x27;2011-1-1&#x27;) e where e.dept_id =  d.id;    </span><br><span class="line"></span><br><span class="line">-- 使用表连接：</span><br><span class="line">select d.*, e.* from  dept d inner join employee e on d.id = e.dept_id where e.join_date &gt;  &#x27;2011-1-1&#x27;  </span><br></pre></td></tr></table></figure><h3 id="in-和-exists-的区别"><a href="#in-和-exists-的区别" class="headerlink" title="in 和 exists 的区别"></a>in 和 exists 的区别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select id from Student</span><br><span class="line">where id exists (select id from SC);</span><br><span class="line"></span><br><span class="line">select id from Stduent</span><br><span class="line">where id in (select id from SC);</span><br></pre></td></tr></table></figure><ul><li><p>in 先进行子查询 select id from SC，再进行外查询 select id from Student</p><p>exists 先执行外查询，再执行子查询</p></li><li><p>in 语句是把外表和内表作连接</p><p>而 exists 语句是对外表作循环，每次循环再对内表进行查询</p></li><li><p>exists 适合子查询的表比外查询大的查询语句</p><p>如果内表和外表差不多大，那么 in 和 exists 的效率差别不大</p></li></ul><h3 id="数据类型有哪些"><a href="#数据类型有哪些" class="headerlink" title="数据类型有哪些"></a>数据类型有哪些</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429100037.png" alt="image-20200429100036635" title="image-20200429100036635"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429100100.png" alt="image-20200429100059106" title="image-20200429100059106"></p><blockquote><p>1、整数类型，包括TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT，分别表示1字节、2字节、3字节、4字节、8字节整数。任何整数类型都可以加上UNSIGNED属性，表示数据是无符号的，即非负整数。<br>长度：整数类型可以被指定长度，例如：INT(11)表示长度为11的INT类型。长度在大多数场景是没有意义的，它不会限制值的合法范围，只会影响显示字符的个数，而且需要和UNSIGNED ZEROFILL属性配合使用才有意义。<br>例子，假定类型设定为INT(5)，属性为UNSIGNED ZEROFILL，如果用户插入的数据为12的话，那么数据库实际存储数据为00012。</p><p>2、实数类型，包括FLOAT、DOUBLE、DECIMAL。<br>DECIMAL可以用于存储比BIGINT还大的整型，能存储精确的小数。<br>而FLOAT和DOUBLE是有取值范围的，并支持使用标准的浮点进行近似计算。<br>计算时FLOAT和DOUBLE相比DECIMAL效率更高一些，DECIMAL你可以理解成是用字符串进行处理。</p><p>3、字符串类型，包括VARCHAR、CHAR、TEXT、BLOB<br>VARCHAR用于存储可变长字符串，它比定长类型更节省空间。<br>VARCHAR使用额外1或2个字节存储字符串长度。列长度小于255字节时，使用1字节表示，否则使用2字节表示。<br>VARCHAR存储的内容超出设置的长度时，内容会被截断。<br>CHAR是定长的，根据定义的字符串长度分配足够的空间。<br>CHAR会根据需要使用空格进行填充方便比较。<br>CHAR适合存储很短的字符串，或者所有值都接近同一个长度。<br>CHAR存储的内容超出设置的长度时，内容同样会被截断。</p><p>使用策略：<br>对于经常变更的数据来说，CHAR比VARCHAR更好，因为CHAR不容易产生碎片。<br>对于非常短的列，CHAR比VARCHAR在存储空间上更有效率。<br>使用时要注意只分配需要的空间，更长的列排序时会消耗更多内存。<br>尽量避免使用TEXT&#x2F;BLOB类型，查询时会使用临时表，导致严重的性能开销。</p><p>4、枚举类型（ENUM），把不重复的数据存储为一个预定义的集合。<br>有时可以使用ENUM代替常用的字符串类型。<br>ENUM存储非常紧凑，会把列表值压缩到一个或两个字节。<br>ENUM在内部存储时，其实存的是整数。<br>尽量避免使用数字作为ENUM枚举的常量，因为容易混乱。<br>排序是按照内部存储的整数</p><p>5、日期和时间类型，尽量使用timestamp，空间效率高于datetime，<br>用整数保存时间戳通常不方便处理。<br>如果需要存储微妙，可以使用bigint存储。<br>看到这里，这道真题是不是就比较容易回答了。</p></blockquote><h3 id="varchar-50-中50的涵义"><a href="#varchar-50-中50的涵义" class="headerlink" title="varchar(50)中50的涵义"></a>varchar(50)中50的涵义</h3><p>最多存放50个字符，varchar(50)和(200)存储hello所占空间一样，但后者在排序时会消耗更多内存，因为order by col采用fixed_length计算col长度(memory引擎也一样)。在早期 MySQL 版本中， 50 代表字节数，现在代表字符数。</p><h3 id="varchar-和-char-的区别"><a href="#varchar-和-char-的区别" class="headerlink" title="varchar 和 char 的区别"></a>varchar 和 char 的区别</h3><ul><li>CHAR 是定长的，根据定义的字符串长度分配足够的空间。CHAR 存储的内容超出设置的长度时，内容会被截断。</li><li>VARCHAR 用于存储可变长字符串，它比定长类型更节省空间。VARCHAR 存储的内容超出设置的长度时，内容同样会被截断。</li><li>对于经常变更的数据来说，CHAR 比 VARCHAR 更好，因为 CHAR 不容易产生碎片。</li><li>对于非常短的列，CHAR 比 VARCHAR 在存储空间上更有效率。</li></ul><h3 id="int-20-中20的涵义"><a href="#int-20-中20的涵义" class="headerlink" title="int(20)中20的涵义"></a>int(20)中20的涵义</h3><p>是指显示字符的长度。20表示最大显示宽度为20，但仍占4字节存储，存储范围不变；</p><p>不影响内部存储，只是影响带 zerofill 定义的 int 时，前面补多少个 0，易于报表展示</p><h3 id="mysql为什么这么设计"><a href="#mysql为什么这么设计" class="headerlink" title="mysql为什么这么设计"></a>mysql为什么这么设计</h3><p>对大多数应用没有意义，只是规定一些工具用来显示字符的个数；int(1)和int(20)存储和计算均一样；</p><h3 id="mysql中int-10-和char-10-以及varchar-10-的区别"><a href="#mysql中int-10-和char-10-以及varchar-10-的区别" class="headerlink" title="mysql中int(10)和char(10)以及varchar(10)的区别"></a>mysql中int(10)和char(10)以及varchar(10)的区别</h3><blockquote><p>int(10)的10表示显示的数据的长度，不是存储数据的大小；chart(10)和varchar(10)的10表示存储数据的大小，即表示存储多少个字符。</p><p>int(10) 10位的数据长度 9999999999，占32个字节，int型4位<br>char(10) 10位固定字符串，不足补空格 最多10个字符<br>varchar(10) 10位可变字符串，不足补空格 最多10个字符</p><p>char(10)表示存储定长的10个字符，不足10个就用空格补齐，占用更多的存储空间</p><p>varchar(10)表示存储10个变长的字符，存储多少个就是多少个，空格也按一个字符存储，这一点是和char(10)的空格不同的，char(10)的空格表示占位不算一个字符</p></blockquote><h3 id="FLOAT和DOUBLE的区别是什么？"><a href="#FLOAT和DOUBLE的区别是什么？" class="headerlink" title="FLOAT和DOUBLE的区别是什么？"></a>FLOAT和DOUBLE的区别是什么？</h3><ul><li>FLOAT类型数据可以存储至多8位十进制数，并在内存中占4字节。</li><li>DOUBLE类型数据可以存储至多18位十进制数，并在内存中占8字节。</li></ul><h3 id="drop、delete与truncate的区别"><a href="#drop、delete与truncate的区别" class="headerlink" title="drop、delete与truncate的区别"></a>drop、delete与truncate的区别</h3><p>三者都表示删除，但是三者有一些差别：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429103543.png" alt="image-20200429103542133" title="image-20200429103542133"></p><h3 id="SQL-的生命周期？"><a href="#SQL-的生命周期？" class="headerlink" title="SQL 的生命周期？"></a>SQL 的生命周期？</h3><ol><li>应用服务器与数据库服务器建立一个连接</li><li>数据库进程拿到请求sql</li><li>解析并生成执行计划，执行</li><li>读取数据到内存并进行逻辑处理</li><li>通过步骤一的连接，发送结果到客户端</li><li>关掉连接，释放资源</li></ol><h3 id="在数据库中查询语句速度很慢，如何优化"><a href="#在数据库中查询语句速度很慢，如何优化" class="headerlink" title="在数据库中查询语句速度很慢，如何优化"></a>在数据库中查询语句速度很慢，如何优化</h3><p>（1）建索引</p><p>（2）减少表之间的关联</p><p>（3）优化 SQL，尽量让 SQL 很快定位数据，不要让 SQL 做全表查询，应该走索引，把数据量大的表排在前面</p><p>（4）简化查询字段，没用的字段不要，已经对返回结果的控制，尽量返回少量数据</p><p>（5）尽量用 Prepared Statement 来查询，不要用 Statement</p><h3 id="超大分页怎么处理？"><a href="#超大分页怎么处理？" class="headerlink" title="超大分页怎么处理？"></a>超大分页怎么处理？</h3><p>超大的分页一般从两个方向上来解决.</p><ul><li>数据库层面,这也是我们主要集中关注的(虽然收效没那么大),类似于select <em>from table where age &gt; 20 limit 1000000,10这种查询其实也是有可以优化的余地的. 这条语句需要load1000000数据然后基本上全部丢弃,只取10条当然比较慢. 当时我们可以修改为select</em> from table where id in (select id from table where age &gt; 20 limit 1000000,10).这样虽然也load了一百万的数据,但是由于索引覆盖,要查询的所有字段都在索引中,所以速度会很快. 同时如果ID连续的好,我们还可以select * from table where id &gt; 1000000 limit 10,效率也是不错的,优化的可能性有许多种,但是核心思想都一样,就是减少load的数据.</li><li>从需求的角度减少这种请求…主要是不做类似的需求(直接跳转到几百万页之后的具体某一页.只允许逐页查看或者按照给定的路线走,这样可预测,可缓存)以及防止ID泄漏且连续被人恶意攻击.</li></ul><h3 id="Union-和-Union-All-有什么不同"><a href="#Union-和-Union-All-有什么不同" class="headerlink" title="Union 和 Union All 有什么不同"></a>Union 和 Union All 有什么不同</h3><p>UNION 在进行表链接后会筛选掉重复的记录，所以在表链接后会对所产生的结果集进行排序运算，删除重复的记录再返回结果。实际大部分应用中是不会产生重复的记录，最常见的是过程表与历史表 UNION。 UNION ALL 只是简单的将两个结果合并后就返回。这样，如果返回的两个结果集中有重复的数据，那么返回的结果集就会包含重复的数据了。 从效率上说，UNION ALL 要比 UNION 快很多，所以，如果可以确认合并的两个结果集中不包含重复的数据的话，那么就使用 UNION ALL。</p><h3 id="order-by-和-group-by-的区别"><a href="#order-by-和-group-by-的区别" class="headerlink" title="order by 和 group by 的区别"></a>order by 和 group by 的区别</h3><p>order by 排序查询、asc 升序、desc 降序 group by 分组查询、having 只能用于 group by 子句、作用于组内，having 条件子句可以直接跟函数表达式。使用 group by 子句的查询语句需要使用聚合函数。</p><h3 id="什么是-PL-SQL"><a href="#什么是-PL-SQL" class="headerlink" title="什么是 PL &#x2F; SQL"></a>什么是 PL &#x2F; SQL</h3><p>PL &#x2F; SQL 是一种程序语言，叫做过程化 SQL 语言（Procedural Language&#x2F;SQL）。PL &#x2F; SQL 是 Oracle 数据库对 SQL 语句的扩展。在普通 SQL 语句的使用上增加了编程语言的特点，所以 PL &#x2F; SQL 把数据操作和查询语句组织在 PL &#x2F; SQL 代码的过程性单元中，通过逻辑判断、循环等操作实现复杂的功能或者计算。PL &#x2F; SQL 只有 Oracle 数据库有。 MySQL 目前不支持 PL &#x2F; SQL 的。</p><h2 id="引擎"><a href="#引擎" class="headerlink" title="引擎"></a>引擎</h2><h3 id="MySQL存储引擎MyISAM与InnoDB区别"><a href="#MySQL存储引擎MyISAM与InnoDB区别" class="headerlink" title="MySQL存储引擎MyISAM与InnoDB区别"></a>MySQL存储引擎MyISAM与InnoDB区别</h3><blockquote><p>存储引擎Storage engine：MySQL中的数据、索引以及其他对象是如何存储的，是一套文件系统的实现。</p><p>常用的存储引擎有以下：</p><p>Innodb引擎：Innodb引擎提供了对数据库ACID事务的支持。并且还提供了行级锁和外键的约束。它的设计的目标就是处理大数据容量的数据库系统。<br>MyIASM引擎(原本Mysql的默认引擎)：不提供事务的支持，也不支持行级锁和外键。<br>MEMORY引擎：所有的数据都在内存中，数据的处理速度快，但是安全性不高。</p></blockquote><p><strong>MyISAM与InnoDB区别</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429100629.png" alt="image-20200429100628653" title="image-20200429100628653"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429100658.png" alt="image-20200429100657751" title="image-20200429100657751"></p><h3 id="MyISAM索引与InnoDB索引的区别？"><a href="#MyISAM索引与InnoDB索引的区别？" class="headerlink" title="MyISAM索引与InnoDB索引的区别？"></a>MyISAM索引与InnoDB索引的区别？</h3><blockquote><p>InnoDB索引是聚簇索引，MyISAM索引是非聚簇索引。<br>InnoDB的主键索引的叶子节点存储着行数据，因此主键索引非常高效。<br>MyISAM索引的叶子节点存储的是行数据地址，需要再寻址一次才能得到数据。<br>InnoDB非主键索引的叶子节点存储的是主键和其他带索引的列数据，因此查询时做到覆盖索引会非常高效。</p></blockquote><h3 id="InnoDB引擎的4大特性"><a href="#InnoDB引擎的4大特性" class="headerlink" title="InnoDB引擎的4大特性"></a>InnoDB引擎的4大特性</h3><blockquote><ul><li>插入缓冲（insert buffer)</li><li>二次写(double write)</li><li>自适应哈希索引(ahi)</li><li>预读(read ahead)</li></ul></blockquote><h3 id="存储引擎选择"><a href="#存储引擎选择" class="headerlink" title="存储引擎选择"></a>存储引擎选择</h3><blockquote><p>如果没有特别的需求，使用默认的<code>Innodb</code>即可。</p><p>MyISAM：以读写插入为主的应用程序，比如博客系统、新闻门户网站。</p><p>Innodb：更新（删除）操作频率也高，或者要保证数据的完整性；并发量高，支持事务和外键。比如OA自动化办公系统。</p></blockquote><h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><h3 id="什么是索引"><a href="#什么是索引" class="headerlink" title="什么是索引"></a>什么是索引</h3><ul><li>索引是一种特殊的文件（InnoDB 数据表上的索引是表空间的一个组成部分），它们包含着对数据表里所有记录的引用指针。</li><li>索引是一种数据结构。数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用 B 树及其变种 B + 树。</li><li>更通俗的说，索引就相当于目录。为了方便查找书中的内容，通过对内容建立索引形成目录。索引是一个文件，它是要占据物理空间的。</li></ul><h3 id="索引的作用"><a href="#索引的作用" class="headerlink" title="索引的作用"></a>索引的作用</h3><p>索引就一种特殊的查询表，数据库的搜索可以利用它加速对数据的检索。它很类似与现实生活中书的目录，不需要查询整本书内容就可以找到想要的数据。</p><h3 id="添加索引目的-⭐"><a href="#添加索引目的-⭐" class="headerlink" title="添加索引目的 ⭐"></a>添加索引目的 ⭐</h3><p>提高数据查询的效率</p><h3 id="什么是聚集索引或非聚集索引-⭐"><a href="#什么是聚集索引或非聚集索引-⭐" class="headerlink" title="什么是聚集索引或非聚集索引 ⭐"></a>什么是聚集索引或非聚集索引 ⭐</h3><p>物理存储顺序与逻辑顺序相同，即聚集索引</p><p>物理存储顺序与索引顺序不一致，即非聚集索引</p><h3 id="索引有哪些优缺点"><a href="#索引有哪些优缺点" class="headerlink" title="索引有哪些优缺点"></a>索引有哪些优缺点</h3><p>索引的优点</p><ul><li>可以大大加快数据的检索速度，这也是创建索引的最主要的原因。</li><li>通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。</li></ul><p>索引的缺点</p><ul><li>时间方面：创建索引和维护索引要耗费时间，具体地，当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，会降低增&#x2F;改&#x2F;删的执行效率；</li><li>空间方面：索引需要占物理空间。</li></ul><h3 id="什么样的字段适合建索引"><a href="#什么样的字段适合建索引" class="headerlink" title="什么样的字段适合建索引"></a>什么样的字段适合建索引</h3><p>唯一、不为空、经常被查询的字段</p><h3 id="索引类型有哪些"><a href="#索引类型有哪些" class="headerlink" title="索引类型有哪些"></a>索引类型有哪些</h3><p>主键索引: 数据列不允许重复，不允许为NULL，一个表只能有一个主键。</p><p>唯一索引: 数据列不允许重复，允许为NULL值，一个表允许多个列创建唯一索引。</p><ul><li>可以通过 ALTER TABLE table_name ADD UNIQUE (column); 创建唯一索引</li><li>可以通过 ALTER TABLE table_name ADD UNIQUE (column1,column2); 创建唯一组合索引</li></ul><p>普通索引: 基本的索引类型，没有唯一性的限制，允许为NULL值。</p><ul><li>可以通过ALTER TABLE table_name ADD INDEX index_name (column);创建普通索引</li><li>可以通过ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);创建组合索引</li></ul><p>全文索引： 是目前搜索引擎使用的一种关键技术。</p><ul><li>可以通过ALTER TABLE table_name ADD FULLTEXT (column);创建全文索引</li></ul><h3 id="索引的数据结构（b树，hash）"><a href="#索引的数据结构（b树，hash）" class="headerlink" title="索引的数据结构（b树，hash）"></a>索引的数据结构（b树，hash）</h3><p>索引的数据结构和具体存储引擎的实现有关，在MySQL中使用较多的索引有Hash索引，B+树索引等，而我们经常使用的InnoDB存储引擎的默认索引实现为：B+树索引。对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议选择BTree索引。</p><p>1）B树索引</p><p>mysql通过存储引擎取数据，基本上90%的人用的就是InnoDB了，按照实现方式分，InnoDB的索引类型目前只有两种：BTREE（B树）索引和HASH索引。B树索引是Mysql数据库中使用最频繁的索引类型，基本所有存储引擎都支持BTree索引。通常我们说的索引不出意外指的就是（B树）索引（实际是用B+树实现的，因为在查看表索引时，mysql一律打印BTREE，所以简称为B树索引）<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429101030.png" alt="image-20200429101029694" title="image-20200429101029694"></p><p>查询方式：</p><p>主键索引区:PI(关联保存的时数据的地址)按主键查询,</p><p>普通索引区:si(关联的id的地址,然后再到达上面的地址)。所以按主键查询,速度最快</p><p>B+tree性质：</p><p>1.）n棵子tree的节点包含n个关键字，不用来保存数据而是保存数据的索引。</p><p>2.）所有的叶子结点中包含了全部关键字的信息，及指向含这些关键字记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。</p><p>3.）所有的非终端结点可以看成是索引部分，结点中仅含其子树中的最大（或最小）关键字。</p><p>4.）B+ 树中，数据对象的插入和删除仅在叶节点上进行。</p><p>5.）B+树有2个头指针，一个是树的根节点，一个是最小关键码的叶节点。</p><p>2）哈希索引</p><p>简要说下，类似于数据结构中简单实现的HASH表（散列表）一样，当我们在mysql中用哈希索引时，主要就是通过Hash算法（常见的Hash算法有直接定址法、平方取中法、折叠法、除数取余法、随机数法），将数据库字段数据转换成定长的Hash值，与这条数据的行指针一并存入Hash表的对应位置；如果发生Hash碰撞（两个不同关键字的Hash值相同），则在对应Hash键下以链表形式存储。当然这只是简略模拟图。<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429101054.png" alt="image-20200429101053364" title="image-20200429101053364"></p><h3 id="索引的基本原理"><a href="#索引的基本原理" class="headerlink" title="索引的基本原理"></a>索引的基本原理</h3><p>索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。</p><p>索引的原理很简单，就是把无序的数据变成有序的查询</p><p>把创建了索引的列的内容进行排序</p><p>对排序结果生成倒排表</p><p>在倒排表内容上拼上数据地址链</p><p>在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据</p><h3 id="索引算法有哪些？"><a href="#索引算法有哪些？" class="headerlink" title="索引算法有哪些？"></a>索引算法有哪些？</h3><p>索引算法有 BTree算法和Hash算法</p><p>BTree算法</p><p>BTree是最常用的mysql数据库索引算法，也是mysql默认的算法。因为它不仅可以被用在&#x3D;,&gt;,&gt;&#x3D;,&lt;,&lt;&#x3D;和between这些比较操作符上，而且还可以用于like操作符，只要它的查询条件是一个不以通配符开头的常量， 例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 只要它的查询条件是一个不以通配符开头的常量</span><br><span class="line">select * from user where name like &#x27;jack%&#x27;; </span><br><span class="line">-- 如果一通配符开头，或者没有使用常量，则不会使用索引，例如： </span><br><span class="line">select * from user where name like &#x27;%jack&#x27;; </span><br></pre></td></tr></table></figure><p><strong>Hash算法</strong></p><p>Hash Hash索引只能用于对等比较，例如&#x3D;,&lt;&#x3D;&gt;（相当于&#x3D;）操作符。由于是一次定位数据，不像BTree索引需要从根节点到枝节点，最后才能访问到页节点这样多次IO访问，所以检索效率远高于BTree索引。</p><h3 id="索引设计的原则？"><a href="#索引设计的原则？" class="headerlink" title="索引设计的原则？"></a>索引设计的原则？</h3><blockquote><p>适合索引的列是出现在where子句中的列，或者连接子句中指定的列<br>基数较小的类，索引效果较差，没有必要在此列建立索引<br>使用短索引，如果对长字符串列进行索引，应该指定一个前缀长度，这样能够节省大量索引空间<br>不要过度索引。索引需要额外的磁盘空间，并降低写操作的性能。在修改表内容的时候，索引会进行更新甚至重构，索引列越多，这个时间就会越长。所以只保持需要的索引有利于查询即可。</p></blockquote><h3 id="创建索引的原则（重中之重）"><a href="#创建索引的原则（重中之重）" class="headerlink" title="创建索引的原则（重中之重）"></a>创建索引的原则（重中之重）</h3><blockquote><p>索引虽好，但也不是无限制的使用，最好符合一下几个原则</p><p>1） 最左前缀匹配原则，组合索引非常重要的原则，mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，比如a &#x3D; 1 and b &#x3D; 2 and c &gt; 3 and d &#x3D; 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。</p><p>2）较频繁作为查询条件的字段才去创建索引</p><p>3）更新频繁字段不适合创建索引</p><p>4）若是不能有效区分数据的列不适合做索引列(如性别，男女未知，最多也就三种，区分度实在太低)</p><p>5）尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修改原来的索引即可。</p><p>6）定义有外键的数据列一定要建立索引。</p><p>7）对于那些查询中很少涉及的列，重复值比较多的列不要建立索引。</p><p>8）对于定义为text、image和bit的数据类型的列不要建立索引。</p></blockquote><h3 id="创建索引的三种方式，删除索引"><a href="#创建索引的三种方式，删除索引" class="headerlink" title="创建索引的三种方式，删除索引"></a>创建索引的三种方式，删除索引</h3><p>第一种方式：在执行CREATE TABLE时创建索引</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE user_index2 (</span><br><span class="line">    id INT auto_increment PRIMARY KEY,</span><br><span class="line">    first_name VARCHAR (16),</span><br><span class="line">    last_name VARCHAR (16),</span><br><span class="line">    id_card VARCHAR (18),</span><br><span class="line">    information text,</span><br><span class="line">    KEY name (first_name, last_name),</span><br><span class="line">    FULLTEXT KEY (information),</span><br><span class="line">    UNIQUE KEY (id_card)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>第二种方式：使用ALTER TABLE命令去增加索引</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE table_name ADD INDEX index_name (column_list);</span><br></pre></td></tr></table></figure><p>ALTER TABLE用来创建普通索引、UNIQUE索引或PRIMARY KEY索引。</p><p>其中table_name是要增加索引的表名，column_list指出对哪些列进行索引，多列时各列之间用逗号分隔。</p><p>索引名index_name可自己命名，缺省时，MySQL将根据第一个索引列赋一个名称。另外，ALTER TABLE允许在单个语句中更改多个表，因此可以在同时创建多个索引。</p><p>第三种方式：使用CREATE INDEX命令创建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX index_name ON table_name (column_list);</span><br></pre></td></tr></table></figure><p>CREATE INDEX可对表增加普通索引或UNIQUE索引。（但是，不能创建PRIMARY KEY索引）</p><p>删除索引</p><p>根据索引名删除普通索引、唯一索引、全文索引：<code>alter table 表名 drop KEY 索引名</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table user_index drop KEY name;</span><br><span class="line">alter table user_index drop KEY id_card;</span><br><span class="line">alter table user_index drop KEY information;</span><br></pre></td></tr></table></figure><p>删除主键索引：<code>alter table 表名 drop primary key</code>（因为主键只有一个）。这里值得注意的是，如果主键自增长，那么不能直接执行此操作（自增长依赖于主键索引）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429101430.png" alt="image-20200429101429645" title="image-20200429101429645"></p><p>需要取消自增长再行删除：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alter table user_index</span><br><span class="line">-- 重新定义字段</span><br><span class="line">MODIFY id int,</span><br><span class="line">drop PRIMARY KEY</span><br></pre></td></tr></table></figure><p>但通常不会删除主键，因为设计主键一定与业务逻辑无关。</p><h3 id="创建索引时需要注意什么？"><a href="#创建索引时需要注意什么？" class="headerlink" title="创建索引时需要注意什么？"></a>创建索引时需要注意什么？</h3><blockquote><ul><li>非空字段：应该指定列为NOT NULL，除非你想存储NULL。在mysql中，含有空值的列很难进行查询优化，因为它们使得索引、索引的统计信息以及比较运算更加复杂。你应该用0、一个特殊的值或者一个空串代替空值；</li><li>取值离散大的字段：（变量各个取值之间的差异程度）的列放到联合索引的前面，可以通过count()函数查看字段的差异值，返回值越大说明字段的唯一值越多字段的离散程度高；</li><li>索引字段越小越好：数据库的数据存储以页为单位一页存储的数据越多一次IO操作获取的数据越大效率越高。</li></ul></blockquote><h3 id="使用索引查询一定能提高查询的性能吗？为什么"><a href="#使用索引查询一定能提高查询的性能吗？为什么" class="headerlink" title="使用索引查询一定能提高查询的性能吗？为什么"></a>使用索引查询一定能提高查询的性能吗？为什么</h3><p>通常，通过索引查询数据比全表扫描要快。但是我们也必须注意到它的代价。</p><p>索引需要空间来存储，也需要定期维护， 每当有记录在表中增减或索引列被修改时，索引本身也会被修改。 这意味着每条记录的INSERT，DELETE，UPDATE将为此多付出4，5 次的磁盘I&#x2F;O。 因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询反应时间变慢。使用索引查询不一定能提高查询性能，索引范围查询(INDEX RANGE SCAN)适用于两种情况:</p><ul><li>基于一个范围的检索，一般查询返回结果集小于表中记录数的30%</li><li>基于非唯一性索引的检索</li></ul><h3 id="百万级别或以上的数据如何删除"><a href="#百万级别或以上的数据如何删除" class="headerlink" title="百万级别或以上的数据如何删除"></a>百万级别或以上的数据如何删除</h3><blockquote><p>关于索引：由于索引需要额外的维护成本，因为索引文件是单独存在的文件,所以当我们对数据的增加,修改,删除,都会产生额外的对索引文件的操作,这些操作需要消耗额外的IO,会降低增&#x2F;改&#x2F;删的执行效率。所以，在我们删除数据库百万级别数据的时候，查询MySQL官方手册得知删除数据的速度和创建的索引数量是成正比的。</p><p>所以我们想要删除百万数据的时候可以先删除索引（此时大概耗时三分多钟）<br>然后删除其中无用数据（此过程需要不到两分钟）<br>删除完成后重新创建索引(此时数据较少了)创建索引也非常快，约十分钟左右。<br>与之前的直接删除绝对是要快速很多，更别说万一删除中断,一切删除会回滚。那更是坑了。</p></blockquote><h3 id="前缀索引"><a href="#前缀索引" class="headerlink" title="前缀索引"></a>前缀索引</h3><blockquote><p>语法：index(field(10))，使用字段值的前10个字符建立索引，默认是使用字段的全部内容建立索引。</p><p>前提：前缀的标识度高。比如密码就适合建立前缀索引，因为密码几乎各不相同。</p><p>实操的难度：在于前缀截取的长度。</p><p>我们可以利用select count(*)&#x2F;count(distinct left(password,prefixLen));，通过从调整prefixLen的值（从1自增）查看不同前缀长度的一个平均匹配度，接近1时就可以了（表示一个密码的前prefixLen个字符几乎能确定唯一一条记录）</p></blockquote><h3 id="什么是最左前缀原则？什么是最左匹配原则"><a href="#什么是最左前缀原则？什么是最左匹配原则" class="headerlink" title="什么是最左前缀原则？什么是最左匹配原则"></a>什么是最左前缀原则？什么是最左匹配原则</h3><blockquote><p>顾名思义，就是最左优先，在创建多列索引时，要根据业务需求，where子句中使用最频繁的一列放在最左边。<br>最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，比如a &#x3D; 1 and b &#x3D; 2 and c &gt; 3 and d &#x3D; 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。<br>=和in可以乱序，比如a &#x3D; 1 and b &#x3D; 2 and c &#x3D; 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式</p></blockquote><h3 id="B树和B-树的区别"><a href="#B树和B-树的区别" class="headerlink" title="B树和B+树的区别"></a>B树和B+树的区别</h3><ul><li>在B树中，你可以将键和值存放在内部节点和叶子节点；但在B+树中，内部节点都是键，没有值，叶子节点同时存放键和值。</li><li>B+树的叶子节点有一条链相连，而B树的叶子节点各自独立。</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429101733.png" alt="image-20200429101732266" title="image-20200429101732266"></p><h3 id="使用B树的好处"><a href="#使用B树的好处" class="headerlink" title="使用B树的好处"></a>使用B树的好处</h3><p>B树可以在内部节点同时存储键和值，因此，把频繁访问的数据放在靠近根节点的地方将会大大提高热点数据的查询效率。这种特性使得B树在特定数据重复多次查询的场景中更加高效。</p><h3 id="使用B-树的好处"><a href="#使用B-树的好处" class="headerlink" title="使用B+树的好处"></a>使用B+树的好处</h3><p>由于B+树的内部节点只存放键，不存放值，因此，一次读取，可以在内存页中获取更多的键，有利于更快地缩小查找范围。 B+树的叶节点由一条链相连，因此，当需要进行一次全数据遍历的时候，B+树只需要使用O(logN)时间找到最小的一个节点，然后通过链进行O(N)的顺序遍历即可。而B树则需要对树的每一层进行遍历，这会需要更多的内存置换次数，因此也就需要花费更多的时间</p><h3 id="Hash索引和B-树所有有什么区别或者说优劣呢"><a href="#Hash索引和B-树所有有什么区别或者说优劣呢" class="headerlink" title="Hash索引和B+树所有有什么区别或者说优劣呢?"></a>Hash索引和B+树所有有什么区别或者说优劣呢?</h3><p>首先要知道Hash索引和B+树索引的底层实现原理：</p><p>hash索引底层就是hash表，进行查找时，调用一次hash函数就可以获取到相应的键值，之后进行回表查询获得实际数据。B+树底层实现是多路平衡查找树。对于每一次的查询都是从根节点出发，查找到叶子节点方可以获得所查键值，然后根据查询判断是否需要回表查询数据。</p><p>那么可以看出他们有以下的不同：</p><p>hash索引进行等值查询更快(一般情况下)，但是却无法进行范围查询。<br>因为在hash索引中经过hash函数建立索引之后，索引的顺序与原顺序无法保持一致，不能支持范围查询。而B+树的的所有节点皆遵循(左节点小于父节点，右节点大于父节点，多叉树也类似)，天然支持范围。</p><p>hash索引不支持使用索引进行排序，原理同上。<br>hash索引不支持模糊查询以及多列索引的最左前缀匹配。原理也是因为hash函数的不可预测。AAAA和AAAAB的索引没有相关性。<br>hash索引任何时候都避免不了回表查询数据，而B+树在符合某些条件(聚簇索引，覆盖索引等)的时候可以只通过索引完成查询。<br>hash索引虽然在等值查询上较快，但是不稳定。性能不可预测，当某个键值存在大量重复的时候，发生hash碰撞，此时效率可能极差。而B+树的查询效率比较稳定，对于所有的查询都是从根节点到叶子节点，且树的高度较低。<br>因此，在大多数情况下，直接选择B+树索引可以获得稳定且较好的查询速度。而不需要使用hash索引。</p><h3 id="数据库为什么使用B-树而不是B树"><a href="#数据库为什么使用B-树而不是B树" class="headerlink" title="数据库为什么使用B+树而不是B树"></a>数据库为什么使用B+树而不是B树</h3><p>B树只适合随机检索，而B+树同时支持随机检索和顺序检索；<br>B+树空间利用率更高，可减少I&#x2F;O次数，磁盘读写代价更低。一般来说，索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。这样的话，索引查找过程中就要产生磁盘I&#x2F;O消耗。B+树的内部结点并没有指向关键字具体信息的指针，只是作为索引使用，其内部结点比B树小，盘块能容纳的结点中关键字数量更多，一次性读入内存中可以查找的关键字也就越多，相对的，IO读写次数也就降低了。而IO读写次数是影响索引检索效率的最大因素；<br>B+树的查询效率更加稳定。B树搜索有可能会在非叶子结点结束，越靠近根节点的记录查找时间越短，只要找到关键字即可确定记录的存在，其性能等价于在关键字全集内做一次二分查找。而在B+树中，顺序检索比较明显，随机检索时，任何关键字的查找都必须走一条从根节点到叶节点的路，所有关键字的查找路径长度相同，导致每一个关键字的查询效率相当。<br>B-树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题。B+树的叶子节点使用指针顺序连接在一起，只要遍历叶子节点就可以实现整棵树的遍历。而且在数据库中基于范围的查询是非常频繁的，而B树不支持这样的操作。<br>增删文件（节点）时，效率更高。因为B+树的叶子节点包含所有关键字，并以有序的链表结构存储，这样可很好提高增删效率。</p><h3 id="B-树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，"><a href="#B-树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，" class="headerlink" title="B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，"></a>B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，</h3><p>在B+树的索引中，叶子节点可能存储了当前的key值，也可能存储了当前的key值以及整行的数据，这就是聚簇索引和非聚簇索引。 在InnoDB中，只有主键索引是聚簇索引，如果没有主键，则挑选一个唯一键建立聚簇索引。如果没有唯一键，则隐式的生成一个键来建立聚簇索引。</p><p>当查询使用聚簇索引时，在对应的叶子节点，可以获取到整行数据，因此不用再次进行回表查询。</p><h3 id="什么是聚簇索引？何时使用聚簇索引与非聚簇索引"><a href="#什么是聚簇索引？何时使用聚簇索引与非聚簇索引" class="headerlink" title="什么是聚簇索引？何时使用聚簇索引与非聚簇索引"></a>什么是聚簇索引？何时使用聚簇索引与非聚簇索引</h3><p>聚簇索引：将数据存储与索引放到了一块，找到索引也就找到了数据<br>非聚簇索引：将数据存储于索引分开结构，索引结构的叶子节点指向了数据的对应行，myisam通过key_buffer把索引先缓存到内存中，当需要访问数据时（通过索引访问数据），在内存中直接搜索索引，然后通过索引找到磁盘相应数据，这也就是为什么索引不在key buffer命中时，速度慢的原因</p><h3 id="非聚簇索引一定会回表查询吗？"><a href="#非聚簇索引一定会回表查询吗？" class="headerlink" title="非聚簇索引一定会回表查询吗？"></a>非聚簇索引一定会回表查询吗？</h3><p>不一定，这涉及到查询语句所要求的字段是否全部命中了索引，如果全部命中了索引，那么就不必再进行回表查询。</p><p>举个简单的例子，假设我们在员工表的年龄上建立了索引，那么当进行select age from employee where age &lt; 20的查询时，在索引的叶子节点上，已经包含了age信息，不会再次进行回表查询。</p><h3 id="联合索引是什么？为什么需要注意联合索引中的顺序？"><a href="#联合索引是什么？为什么需要注意联合索引中的顺序？" class="headerlink" title="联合索引是什么？为什么需要注意联合索引中的顺序？"></a>联合索引是什么？为什么需要注意联合索引中的顺序？</h3><p>MySQL可以使用多个字段同时建立一个索引，叫做联合索引。在联合索引中，如果想要命中索引，需要按照建立索引时的字段顺序挨个使用，否则无法命中索引。</p><p>具体原因为:</p><p>MySQL使用索引时需要索引有序，假设现在建立了”name，age，school”的联合索引，那么索引的排序为: 先按照name排序，如果name相同，则按照age排序，如果age的值也相等，则按照school进行排序。</p><p>当进行查询时，此时索引仅仅按照name严格有序，因此必须首先使用name字段进行等值查询，之后对于匹配到的列而言，其按照age字段严格有序，此时可以使用age字段用做索引查找，以此类推。因此在建立联合索引的时候应该注意索引列的顺序，一般情况下，将查询需求频繁或者字段选择性高的列放在前面。此外可以根据特例的查询或者表结构进行单独的调整。</p><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h3><p>事务是一个不可分割的数据库操作序列，也是数据库并发控制的基本单位，其执行的结果必须使数据库从一种一致性状态变到另一种一致性状态。事务是指一个单元的工作，要么全做，要么全不做，事务是逻辑上的一组操作，保证一组数据的修改要么全部执行，要么全部不执行。</p><blockquote><p>举例：事务最经典也经常被拿出来说例子就是转账了。</p></blockquote><p>假如小明要给小红转账 1000 元，这个转账会涉及到两个关键操作就是：将小明的余额减少 1000 元，将小红的余额增加 1000 元。万一在这两个操作之间突然出现错误比如银行系统崩溃，导致小明余额减少而小红的余额没有增加，这样就不对了。事务就是保证这两个关键操作要么都成功，要么都要失败。</p><h3 id="事物的四大特性-ACID-介绍一下"><a href="#事物的四大特性-ACID-介绍一下" class="headerlink" title="事物的四大特性(ACID)介绍一下?"></a>事物的四大特性(ACID)介绍一下?</h3><p>关系性数据库需要遵循ACID规则，具体内容如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429102056.png" alt="image-20200429102055945" title="image-20200429102055945"></p><ul><li>原子性： 事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用；</li><li>一致性： 执行事务前后，数据保持一致，多个事务对同一个数据读取的结果是相同的；</li><li>隔离性： 并发访问数据库时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的；</li><li>持久性： 一个事务被提交之后。它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。</li></ul><h3 id="什么是脏读？幻读？不可重复读？"><a href="#什么是脏读？幻读？不可重复读？" class="headerlink" title="什么是脏读？幻读？不可重复读？"></a>什么是脏读？幻读？不可重复读？</h3><ul><li>脏读(Drity Read)：某个事务已更新一份数据，另一个事务在此时读取了同一份数据，由于某些原因，前一个RollBack了操作，则后一个事务所读取的数据就会是不正确的。</li><li>不可重复读(Non-repeatable read):在一个事务的两次查询之中数据不一致，这可能是两次查询过程中间插入了一个事务更新的原有的数据。</li><li>幻读(Phantom Read):在一个事务的两次查询中数据笔数不一致，例如有一个事务查询了几列(Row)数据，而另一个事务却在此时插入了新的几列数据，先前的事务在接下来的查询中，就会发现有几列数据是它先前所没有的。</li></ul><h3 id="什么是事务的隔离级别？MySQL的默认隔离级别是什么？"><a href="#什么是事务的隔离级别？MySQL的默认隔离级别是什么？" class="headerlink" title="什么是事务的隔离级别？MySQL的默认隔离级别是什么？"></a>什么是事务的隔离级别？MySQL的默认隔离级别是什么？</h3><p>为了达到事务的四大特性，数据库定义了4种不同的事务隔离级别，由低到高依次为Read uncommitted、Read committed、Repeatable read、Serializable，这四个级别可以逐个解决脏读、不可重复读、幻读这几类问题。</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/CS-Notes/20200429102217.png" alt="image-20200429102216529" title="image-20200429102216529"></p><p>SQL 标准定义了四个隔离级别：</p><p>READ-UNCOMMITTED(读取未提交)： 最低的隔离级别，允许读取尚未提交的数据变更，可能会导致脏读、幻读或不可重复读。<br>READ-COMMITTED(读取已提交)： 允许读取并发事务已经提交的数据，可以阻止脏读，但是幻读或不可重复读仍有可能发生。<br>REPEATABLE-READ(可重复读)： 对同一字段的多次读取结果都是一致的，除非数据是被本身事务自己所修改，可以阻止脏读和不可重复读，但幻读仍有可能发生。<br>SERIALIZABLE(可串行化)： 最高的隔离级别，完全服从ACID的隔离级别。所有的事务依次逐个执行，这样事务之间就完全不可能产生干扰，也就是说，该级别可以防止脏读、不可重复读以及幻读。</p><h3 id="事务的隔离级别有哪些"><a href="#事务的隔离级别有哪些" class="headerlink" title="事务的隔离级别有哪些"></a>事务的隔离级别有哪些</h3><p>事务隔离级别包括： 原子性，即不可分割性，事务要么全部被执行，要么就全部不被执行； 一致性或可串性，事务的执行使得数据库从一种正确状态转换成另一种正确状态； 隔离性，在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务； 持久性,事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后有了其他故障，事务的处理结果也会得到保存。</p><h2 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h2><h3 id="什么是锁"><a href="#什么是锁" class="headerlink" title="什么是锁"></a>什么是锁</h3><p>在所有的 DBMS 中，锁是实现事务的关键，锁可以保证事务的完整性和并发性。与现实生活中锁一样，它可以是某些数据的拥有者，在某段时间内不能使用某些数据或数据结构。当然锁还分级别的。</p><h3 id="隔离级别与锁的关系"><a href="#隔离级别与锁的关系" class="headerlink" title="隔离级别与锁的关系"></a>隔离级别与锁的关系</h3><p>在Read Uncommitted级别下，读取数据不需要加共享锁，这样就不会跟被修改的数据上的排他锁冲突</p><p>在Read Committed级别下，读操作需要加共享锁，但是在语句执行完以后释放共享锁；</p><p>在Repeatable Read级别下，读操作需要加共享锁，但是在事务提交之前并不释放共享锁，也就是必须等待事务执行完毕以后才释放共享锁。</p><p>SERIALIZABLE 是限制性最强的隔离级别，因为该级别锁定整个范围的键，并一直持有锁，直到事务完成。</p><h3 id="按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法"><a href="#按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法" class="headerlink" title="按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法"></a>按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法</h3><p>在关系型数据库中，可以按照锁的粒度把数据库锁分为行级锁(INNODB引擎)、表级锁(MYISAM引擎)和页级锁(BDB引擎 )。</p><p>MyISAM和InnoDB存储引擎使用的锁：</p><p>MyISAM采用表级锁(table-level locking)。<br>InnoDB支持行级锁(row-level locking)和表级锁，默认为行级锁<br>行级锁，表级锁和页级锁对比</p><p>行级锁 行级锁是Mysql中锁定粒度最细的一种锁，表示只针对当前操作的行进行加锁。行级锁能大大减少数据库操作的冲突。其加锁粒度最小，但加锁的开销也最大。行级锁分为共享锁 和 排他锁。</p><p>特点：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。</p><p>表级锁 表级锁是MySQL中锁定粒度最大的一种锁，表示对当前操作的整张表加锁，它实现简单，资源消耗较少，被大部分MySQL引擎支持。最常使用的MYISAM与INNODB都支持表级锁定。表级锁定分为表共享读锁（共享锁）与表独占写锁（排他锁）。</p><p>特点：开销小，加锁快；不会出现死锁；锁定粒度大，发出锁冲突的概率最高，并发度最低。</p><p>页级锁 页级锁是MySQL中锁定粒度介于行级锁和表级锁中间的一种锁。表级锁速度快，但冲突多，行级冲突少，但速度慢。所以取了折衷的页级，一次锁定相邻的一组记录。</p><p>特点：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般</p><h3 id="从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了"><a href="#从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了" class="headerlink" title="从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了"></a>从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了</h3><blockquote><p>从锁的类别上来讲，有共享锁和排他锁。</p><p>共享锁: 又叫做读锁。 当用户要进行数据的读取时，对数据加上共享锁。共享锁可以同时加上多个。</p><p>排他锁: 又叫做写锁。 当用户要进行数据的写入时，对数据加上排他锁。排他锁只可以加一个，他和其他的排他锁，共享锁都相斥。</p><p>用上面的例子来说就是用户的行为有两种，一种是来看房，多个用户一起看房是可以接受的。 一种是真正的入住一晚，在这期间，无论是想入住的还是想看房的都不可以。</p><p>锁的粒度取决于具体的存储引擎，InnoDB实现了行级锁，页级锁，表级锁。</p><p>他们的加锁开销从大到小，并发能力也是从大到小。</p></blockquote><h3 id="MySQL中InnoDB引擎的行锁是怎么实现的？"><a href="#MySQL中InnoDB引擎的行锁是怎么实现的？" class="headerlink" title="MySQL中InnoDB引擎的行锁是怎么实现的？"></a>MySQL中InnoDB引擎的行锁是怎么实现的？</h3><blockquote><p>答：InnoDB是基于索引来完成行锁</p><p>例: select * from tab_with_index where id &#x3D; 1 for update;</p><p>for update 可以根据条件来完成行锁锁定，并且 id 是有索引键的列，如果 id 不是索引键那么InnoDB将完成表锁，并发将无从谈起</p></blockquote><h3 id="InnoDB存储引擎的锁的算法有三种"><a href="#InnoDB存储引擎的锁的算法有三种" class="headerlink" title="InnoDB存储引擎的锁的算法有三种"></a>InnoDB存储引擎的锁的算法有三种</h3><blockquote><ul><li>Record lock：单个行记录上的锁</li><li>Gap lock：间隙锁，锁定一个范围，不包括记录本身</li><li>Next-key lock：record+gap 锁定一个范围，包含记录本身</li></ul></blockquote><p>相关知识点：</p><p>innodb对于行的查询使用next-key lock<br>Next-locking keying为了解决Phantom Problem幻读问题<br>当查询的索引含有唯一属性时，将next-key lock降级为record key<br>Gap锁设计的目的是为了阻止多个事务将记录插入到同一范围内，而这会导致幻读问题的产生<br>有两种方式显式关闭gap锁：（除了外键约束和唯一性检查外，其余情况仅使用record lock） A. 将事务隔离级别设置为RC B. 将参数innodb_locks_unsafe_for_binlog设置为1</p><h3 id="什么是死锁？怎么解决？"><a href="#什么是死锁？怎么解决？" class="headerlink" title="什么是死锁？怎么解决？"></a>什么是死锁？怎么解决？</h3><p>死锁是指两个或多个事务在同一资源上相互占用，并请求锁定对方的资源，从而导致恶性循环的现象。</p><p>常见的解决死锁的方法</p><p>1、如果不同程序会并发存取多个表，尽量约定以相同的顺序访问表，可以大大降低死锁机会。</p><p>2、在同一个事务中，尽可能做到一次锁定所需要的所有资源，减少死锁产生概率；</p><p>3、对于非常容易产生死锁的业务部分，可以尝试使用升级锁定颗粒度，通过表级锁定来减少死锁产生的概率；</p><p>如果业务处理不好可以用分布式事务锁或者使用乐观锁</p><h3 id="数据库的乐观锁和悲观锁是什么？怎么实现的？"><a href="#数据库的乐观锁和悲观锁是什么？怎么实现的？" class="headerlink" title="数据库的乐观锁和悲观锁是什么？怎么实现的？"></a>数据库的乐观锁和悲观锁是什么？怎么实现的？</h3><p>数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。乐观并发控制（乐观锁）和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。</p><p>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。在查询完数据的时候就把事务锁起来，直到提交事务。实现方式：使用数据库中的锁机制</p><p>乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。在修改数据的时候把事务锁起来，通过version的方式来进行锁定。实现方式：乐一般会使用版本号机制或CAS算法实现。</p><p>两种锁的使用场景</p><p>从上面对两种锁的介绍，我们知道两种锁各有优缺点，不可认为一种好于另一种，像乐观锁适用于写比较少的情况下（多读场景），即冲突真的很少发生的时候，这样可以省去了锁的开销，加大了系统的整个吞吐量。</p><p>但如果是多写的情况，一般会经常产生冲突，这就会导致上层应用会不断的进行retry，这样反倒是降低了性能，所以一般多写的场景下用悲观锁就比较合适。</p><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><h3 id="为什么要使用视图"><a href="#为什么要使用视图" class="headerlink" title="为什么要使用视图"></a>为什么要使用视图</h3><p>为了提高复杂 SQL 语句的复用性和表操作的安全性，数据库管理系统提供了视图特性。视图使得开发者只关心感兴趣的某些特定数据和所负责的特定任务，只能看到视图中所定义的数据，而不是视图所引用表中的数据，从而提高了数据库中数据的安全性。</p><h3 id="什么是视图"><a href="#什么是视图" class="headerlink" title="什么是视图"></a>什么是视图</h3><p>视图本质上是一种虚拟表，在物理上是不存在的，具有和物理表相同的功能，其内容与真实的表相似，包含一系列带有名称的列和行数据，可以对视图进行增，改，查，操作，但是，视图并不在数据库中以储存的数据值形式存在。行和列数据来自定义视图的查询所引用基本表，并且在具体引用视图时动态生成。</p><h3 id="视图有哪些特点"><a href="#视图有哪些特点" class="headerlink" title="视图有哪些特点"></a>视图有哪些特点</h3><p>视图的特点如下:</p><p>视图的列可以来自不同的表，是表的抽象和在逻辑意义上建立的新关系。</p><p>视图是由基本表(实表)产生的表(虚表)。</p><p>视图的建立和删除不影响基本表。</p><p>对视图内容的更新(添加，删除和修改)直接影响基本表。</p><p>当视图来自多个基本表时，不允许添加和删除数据。</p><p>视图的操作包括创建视图，查看视图，删除视图和修改视图。</p><h3 id="视图的使用场景有哪些"><a href="#视图的使用场景有哪些" class="headerlink" title="视图的使用场景有哪些"></a>视图的使用场景有哪些</h3><blockquote><p>视图根本用途：简化 SQL 查询，提高开发效率。如果说还有另外一个用途那就是兼容老的表结构。</p><p>下面是视图的常见使用场景：</p><p>重用 SQL 语句；</p><p>简化复杂的 SQL 操作。在编写查询后，可以方便的重用它而不必知道它的基本查询细节；</p><p>使用表的组成部分而不是整个表；</p><p>保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限；</p><p>更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。</p></blockquote><h3 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h3><p>（1）查询简单化：视图能简化用户的操作</p><p>（2）数据安全性：视图使用户能以多种角度看待同一数据，能够对机密数据提供安全保护</p><p>（3）逻辑数据独立性：视图对重构数据库提供了一定程度的逻辑独立性</p><h3 id="视图的缺点"><a href="#视图的缺点" class="headerlink" title="视图的缺点"></a>视图的缺点</h3><p>（1）性能：数据库必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，数据库也把它变成一个复杂的结合体，需要花费一定的时间。</p><p>（2）修改限制：当用户试图修改视图的某些行时，数据库必须把它转化为对基本表的某些行的修改。事实上，当从视图中插入或者删除时，情况也是这样。对于简单视图来说，这是很方便的，但是，对于比较复杂的视图，可能是不可修改的</p><h3 id="表和视图的关系"><a href="#表和视图的关系" class="headerlink" title="表和视图的关系"></a>表和视图的关系</h3><p>视图其实就是一条查询 SQL 语句，用于显示一个或多个表或其他视图中的相关数据。 表就是关系数据库中实际存储数据用的。</p><h3 id="什么是游标"><a href="#什么是游标" class="headerlink" title="什么是游标"></a>什么是游标</h3><p>游标是系统为用户开设的一个数据缓冲区，存放 SQL 语句的执行结果，每个游标区都有一个名字。用户可以通过游标逐一获取记录并赋给主变量，交由主语言进一步处理。</p><h2 id="存储过程与函数"><a href="#存储过程与函数" class="headerlink" title="存储过程与函数"></a>存储过程与函数</h2><h3 id="什么是存储过程"><a href="#什么是存储过程" class="headerlink" title="什么是存储过程"></a>什么是存储过程</h3><p>存储过程是一个预编译的 SQL 语句，优点是允许模块化的设计，就是说只需要创建一次，以后在该程序中就可以调用多次。如果某次操作需要执行多次 SQL，使用存储过程比单纯 SQL 语句执行要快。</p><h3 id="存储过程用什么来调用"><a href="#存储过程用什么来调用" class="headerlink" title="存储过程用什么来调用"></a>存储过程用什么来调用</h3><ul><li>可以用一个命令对象来调用存储过程。</li><li>可以供外部程序调用，比如：Java 程序。</li></ul><h3 id="存储过程的优缺点"><a href="#存储过程的优缺点" class="headerlink" title="存储过程的优缺点"></a>存储过程的优缺点</h3><p>优点</p><p>1）存储过程是预编译过的，执行效率高。</p><p>2）存储过程的代码直接存放于数据库中，通过存储过程名直接调用，减少网络通讯。</p><p>3）安全性高，执行存储过程需要有一定权限的用户。</p><p>4）存储过程可以重复使用，减少数据库开发人员的工作量。</p><p>缺点</p><p>1）调试麻烦，但是用 PL&#x2F;SQL Developer 调试很方便！弥补这个缺点。</p><p>2）移植性差，数据库端代码当然是与数据库相关的。但是如果是做工程型项目，基本不存在移植问题。</p><p>3）重新编译问题，因为后端代码是运行前编译的，如果带有引用关系的对象发生改变时，受影响的存储过程、包将需要重新编译（不过也可以设置成运行时刻自动编译）。</p><p>4）如果在一个程序系统中大量的使用存储过程，到程序交付使用的时候随着用户需求的增加会导致数据结构的变化，接着就是系统的相关问题了，最后如果用户想维护该系统可以说是很难很难、而且代价是空前的，维护起来更麻烦。</p><h3 id="存储过程与函数的区别"><a href="#存储过程与函数的区别" class="headerlink" title="存储过程与函数的区别"></a>存储过程与函数的区别</h3><p>存储过程</p><p>函数</p><p>用于在数据库中完成特定的操作或者任务（如插入、删除等）</p><p>用于特定的数据（如选择）</p><p>程序头部声明用 procedure</p><p>程序头部声明用 function</p><p>程序头部声明时不需描述返回类型</p><p>程序头部声明时要描述返回类型，而且 PL &#x2F; SQL 块中至少要包括一个有效的 return 语句</p><p>可以使用 in &#x2F; out &#x2F; in out 三种模式的参数</p><p>可以使用 in &#x2F; out &#x2F;in out 三种模式的参数</p><p>可作为一个独立的 PL &#x2F; SQL 语句来执行</p><p>不能独立执行，必须作为表达式的一部分调用</p><p>可以通过 out &#x2F; in out 返回零个或多个值</p><p>通过 return 语句返回一个值，且改值要与声明部分一致，也可以是通过 out 类型的参数带出的变量</p><p>SQL 语句( DML 或 SELECT )中不可调用存储过程</p><p>SQL 语句( DML 或 SELECT )中可以调用函数</p><h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><h3 id="什么是触发器"><a href="#什么是触发器" class="headerlink" title="什么是触发器"></a>什么是触发器</h3><p>触发器是用户定义在关系表上的一类由事件驱动的特殊的存储过程，触发器是指一段代码，当触发某个事件时，自动执行这些代码。主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器被触发。</p><h3 id="触发器的使用场景有哪些"><a href="#触发器的使用场景有哪些" class="headerlink" title="触发器的使用场景有哪些"></a>触发器的使用场景有哪些</h3><p>可以通过数据库中的相关表实现级联更改。<br>实时监控某张表中的某个字段的更改而需要做出相应的处理。<br>例如可以生成某些业务的编号。<br>注意不要滥用，否则会造成数据库及应用程序的维护困难。<br>大家需要牢记以上基础知识点，重点是理解数据类型CHAR和VARCHAR的差异，表存储引擎InnoDB和MyISAM的区别。</p><h3 id="MySQL中都有哪些触发器"><a href="#MySQL中都有哪些触发器" class="headerlink" title="MySQL中都有哪些触发器"></a>MySQL中都有哪些触发器</h3><p>在 MySQL 数据库中有如下六种触发器：</p><ul><li>Before Insert</li><li>After Insert</li><li>Before Update</li><li>After Update</li><li>Before Delete</li><li>After Delete</li></ul><h3 id="事前触发和事后触发有什么区别"><a href="#事前触发和事后触发有什么区别" class="headerlink" title="事前触发和事后触发有什么区别"></a>事前触发和事后触发有什么区别</h3><p>事前触发器运行于触发事件发生之前，而事后触发器运行于触发事件发生之后。通常事前触发器可以获取事件之前和新的字段值。</p><h3 id="语句级触发和行级触发有何区别"><a href="#语句级触发和行级触发有何区别" class="headerlink" title="语句级触发和行级触发有何区别"></a>语句级触发和行级触发有何区别</h3><p>语句级触发器可以在语句执行前或后执行，而行级触发在触发器所影响的每一行触发一次。</p></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" title="头像" alt="头像"></a><div class="post-copyright__author_name">公爵</div><div class="post-copyright__author_desc">以指键之轻，承载知识之重</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.gjcloak.top/d4eb4c98.html">原创</a><a class="post-copyright-title"><span onclick='rm.copyPageUrl("https://blog.gjcloak.top/d4eb4c98.html")'>数据库面试题</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://cdn.gjcloak.xyz/images/微信无金额.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.gjcloak.xyz/images/微信无金额.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.gjcloak.xyz/images/QQ.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.gjcloak.xyz/images/QQ.png" alt="QQ"></a><div class="post-qr-code-desc">QQ</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display:none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.gjcloak.top/d4eb4c98.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=数据库面试题&amp;url=https://blog.gjcloak.top/d4eb4c98.html&amp;pic=https://cos.gjcloak.xyz/pigo/202208191053083.jpeg?imageMogr2/format/webp/interlace/1/quality/0" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.gjcloak.top" target="_blank">公爵书房</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span> 面试题<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tags-punctuation"><i class="anzhiyufont anzhiyu-icon-tag"></i></span> 数据库<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cos.gjcloak.xyz/pigo/202308211439548.webp?imageMogr2/format/webp/interlace/1/quality/0" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/147.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208030939595.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Ubuntu 安装配置 FTP 服务</div></div></a></div><div class="next-post pull-right"><a href="/149.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202207252244414.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MediaWiki 相关自定义设置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size:1.5rem;margin-right:4px"></i><span>猜你喜欢</span></div><div class="relatedPosts-list"><div><a href="/48.html" title="C 语言面试题"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208171632140.jpeg?imageMogr2/format/webp/interlace/1/quality/0" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2017-06-19</div><div class="title">C 语言面试题</div></div></a></div><div><a href="/51.html" title="数据库原理及应用"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208030937207.jpeg?imageMogr2/format/webp/interlace/1/quality/0" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2019-11-02</div><div class="title">数据库原理及应用</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i> <span>评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left:4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar" title="点击展开"><img class="avatar-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__description"><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">这有关于<b style="color:#fff">P社</b>相关的攻略教程，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:.6rem 0;text-align:justify;color:rgba(255,255,255,.8)">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about/"><h1 class="author-info__name">公爵</h1><div class="author-info__desc">以指键之轻，承载知识之重</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/gongjuecloak" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=763771418@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/3054324" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.</span> <span class="toc-text">数据库基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.</span> <span class="toc-text">为什么要使用数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8F%91%E5%B1%95%E9%98%B6%E6%AE%B5-%E2%AD%90"><span class="toc-number">1.2.</span> <span class="toc-text">数据库的发展阶段 ⭐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%97%B4%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">1.3.</span> <span class="toc-text">文件系统与数据库系统之间的比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.4.</span> <span class="toc-text">什么是数据库系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text">什么是数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.6.</span> <span class="toc-text">什么是数据库的约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.7.</span> <span class="toc-text">什么是数据库管理系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.8.</span> <span class="toc-text">什么是数据模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%84%E8%8C%83%E5%8C%96"><span class="toc-number">1.9.</span> <span class="toc-text">什么是规范化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%89%E7%BA%A7%E6%A8%A1%E5%BC%8F%E7%BB%93%E6%9E%84"><span class="toc-number">1.10.</span> <span class="toc-text">简述数据库的三级模式结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.11.</span> <span class="toc-text">数据库系统的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-SQL%EF%BC%9F"><span class="toc-number">1.12.</span> <span class="toc-text">什么是 SQL？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-MySQL"><span class="toc-number">1.13.</span> <span class="toc-text">什么是 MySQL?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%BC%8F%E7%9A%84%E5%AE%9A%E4%B9%89-%E2%AD%90"><span class="toc-number">1.14.</span> <span class="toc-text">范式的定义 ⭐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.15.</span> <span class="toc-text">数据库三大范式是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E6%9C%89%E5%85%B3%E6%9D%83%E9%99%90%E7%9A%84%E8%A1%A8%E9%83%BD%E6%9C%89%E5%93%AA%E5%87%A0%E4%B8%AA"><span class="toc-number">1.16.</span> <span class="toc-text">mysql有关权限的表都有哪几个</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E7%9A%84binlog%E6%9C%89%E6%9C%89%E5%87%A0%E7%A7%8D%E5%BD%95%E5%85%A5%E6%A0%BC%E5%BC%8F%EF%BC%9F%E5%88%86%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.17.</span> <span class="toc-text">MySQL的binlog有有几种录入格式？分别有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8"><span class="toc-number">1.18.</span> <span class="toc-text">什么是数据字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Oracle-%E5%92%8C-MySQL-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.19.</span> <span class="toc-text">Oracle 和 MySQL 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%94%E8%BE%83"><span class="toc-number">1.20.</span> <span class="toc-text">数据库和非关系型数据库比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">关系数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AF%94%E8%BE%83"><span class="toc-number">2.1.</span> <span class="toc-text">关系型数据库和非关系型数据库比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">2.2.</span> <span class="toc-text">数据库连接池</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E4%B8%BE%E5%87%A0%E7%A7%8D%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">2.3.</span> <span class="toc-text">列举几种表连接方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%86%85%E8%BF%9E%E6%8E%A5%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.4.</span> <span class="toc-text">什么是内连接、外连接、交叉连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E9%94%AE%E3%80%81%E5%80%99%E9%80%89%E9%94%AE%E3%80%81%E4%B8%BB%E9%94%AE%E3%80%81%E5%A4%96%E9%94%AE%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.5.</span> <span class="toc-text">超键、候选键、主键、外键分别是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E5%92%8C%E5%A4%96%E9%94%AE%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.6.</span> <span class="toc-text">主键和外键的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%B4%E6%8A%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">2.7.</span> <span class="toc-text">如何维护数据库的完整性和一致性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%BB%E7%A0%81-%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%96%E7%A0%81"><span class="toc-number">2.8.</span> <span class="toc-text">什么是主码?什么是外码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.9.</span> <span class="toc-text">完整性约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8-SQL-%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.</span> <span class="toc-text">常用 SQL 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86-%E2%AD%90"><span class="toc-number">3.1.</span> <span class="toc-text">SQL 的四个组成部分 ⭐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E7%BA%A6%E6%9D%9F%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%EF%BC%9F"><span class="toc-number">3.2.</span> <span class="toc-text">SQL 约束有哪几种？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E7%A7%8D%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.</span> <span class="toc-text">六种关联查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.</span> <span class="toc-text">什么是子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%89%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-number">3.5.</span> <span class="toc-text">子查询的三种情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in-%E5%92%8C-exists-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.6.</span> <span class="toc-text">in 和 exists 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">3.7.</span> <span class="toc-text">数据类型有哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#varchar-50-%E4%B8%AD50%E7%9A%84%E6%B6%B5%E4%B9%89"><span class="toc-number">3.8.</span> <span class="toc-text">varchar(50)中50的涵义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#varchar-%E5%92%8C-char-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.9.</span> <span class="toc-text">varchar 和 char 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#int-20-%E4%B8%AD20%E7%9A%84%E6%B6%B5%E4%B9%89"><span class="toc-number">3.10.</span> <span class="toc-text">int(20)中20的涵义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E4%B9%88%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.11.</span> <span class="toc-text">mysql为什么这么设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E4%B8%ADint-10-%E5%92%8Cchar-10-%E4%BB%A5%E5%8F%8Avarchar-10-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.12.</span> <span class="toc-text">mysql中int(10)和char(10)以及varchar(10)的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FLOAT%E5%92%8CDOUBLE%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">3.13.</span> <span class="toc-text">FLOAT和DOUBLE的区别是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#drop%E3%80%81delete%E4%B8%8Etruncate%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.14.</span> <span class="toc-text">drop、delete与truncate的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9F"><span class="toc-number">3.15.</span> <span class="toc-text">SQL 的生命周期？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E9%80%9F%E5%BA%A6%E5%BE%88%E6%85%A2%EF%BC%8C%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96"><span class="toc-number">3.16.</span> <span class="toc-text">在数据库中查询语句速度很慢，如何优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E5%A4%A7%E5%88%86%E9%A1%B5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%EF%BC%9F"><span class="toc-number">3.17.</span> <span class="toc-text">超大分页怎么处理？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Union-%E5%92%8C-Union-All-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C"><span class="toc-number">3.18.</span> <span class="toc-text">Union 和 Union All 有什么不同</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#order-by-%E5%92%8C-group-by-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.19.</span> <span class="toc-text">order by 和 group by 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-PL-SQL"><span class="toc-number">3.20.</span> <span class="toc-text">什么是 PL &#x2F; SQL</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E6%93%8E"><span class="toc-number">4.</span> <span class="toc-text">引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8EMyISAM%E4%B8%8EInnoDB%E5%8C%BA%E5%88%AB"><span class="toc-number">4.1.</span> <span class="toc-text">MySQL存储引擎MyISAM与InnoDB区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyISAM%E7%B4%A2%E5%BC%95%E4%B8%8EInnoDB%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">4.2.</span> <span class="toc-text">MyISAM索引与InnoDB索引的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InnoDB%E5%BC%95%E6%93%8E%E7%9A%844%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">4.3.</span> <span class="toc-text">InnoDB引擎的4大特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E9%80%89%E6%8B%A9"><span class="toc-number">4.4.</span> <span class="toc-text">存储引擎选择</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">5.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95"><span class="toc-number">5.1.</span> <span class="toc-text">什么是索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text">索引的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95%E7%9B%AE%E7%9A%84-%E2%AD%90"><span class="toc-number">5.3.</span> <span class="toc-text">添加索引目的 ⭐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95%E6%88%96%E9%9D%9E%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95-%E2%AD%90"><span class="toc-number">5.4.</span> <span class="toc-text">什么是聚集索引或非聚集索引 ⭐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">5.5.</span> <span class="toc-text">索引有哪些优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E5%AD%97%E6%AE%B5%E9%80%82%E5%90%88%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">5.6.</span> <span class="toc-text">什么样的字段适合建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">5.7.</span> <span class="toc-text">索引类型有哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%88b%E6%A0%91%EF%BC%8Chash%EF%BC%89"><span class="toc-number">5.8.</span> <span class="toc-text">索引的数据结构（b树，hash）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">5.9.</span> <span class="toc-text">索引的基本原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%AE%97%E6%B3%95%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">5.10.</span> <span class="toc-text">索引算法有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%8E%9F%E5%88%99%EF%BC%9F"><span class="toc-number">5.11.</span> <span class="toc-text">索引设计的原则？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8E%9F%E5%88%99%EF%BC%88%E9%87%8D%E4%B8%AD%E4%B9%8B%E9%87%8D%EF%BC%89"><span class="toc-number">5.12.</span> <span class="toc-text">创建索引的原则（重中之重）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">5.13.</span> <span class="toc-text">创建索引的三种方式，删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%97%B6%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">5.14.</span> <span class="toc-text">创建索引时需要注意什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2%E4%B8%80%E5%AE%9A%E8%83%BD%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%80%A7%E8%83%BD%E5%90%97%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88"><span class="toc-number">5.15.</span> <span class="toc-text">使用索引查询一定能提高查询的性能吗？为什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BE%E4%B8%87%E7%BA%A7%E5%88%AB%E6%88%96%E4%BB%A5%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4"><span class="toc-number">5.16.</span> <span class="toc-text">百万级别或以上的数据如何删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95"><span class="toc-number">5.17.</span> <span class="toc-text">前缀索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%80%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99%EF%BC%9F%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%80%E5%B7%A6%E5%8C%B9%E9%85%8D%E5%8E%9F%E5%88%99"><span class="toc-number">5.18.</span> <span class="toc-text">什么是最左前缀原则？什么是最左匹配原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B%E6%A0%91%E5%92%8CB-%E6%A0%91%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">5.19.</span> <span class="toc-text">B树和B+树的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8B%E6%A0%91%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">5.20.</span> <span class="toc-text">使用B树的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8B-%E6%A0%91%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">5.21.</span> <span class="toc-text">使用B+树的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hash%E7%B4%A2%E5%BC%95%E5%92%8CB-%E6%A0%91%E6%89%80%E6%9C%89%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E6%88%96%E8%80%85%E8%AF%B4%E4%BC%98%E5%8A%A3%E5%91%A2"><span class="toc-number">5.22.</span> <span class="toc-text">Hash索引和B+树所有有什么区别或者说优劣呢?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8B-%E6%A0%91%E8%80%8C%E4%B8%8D%E6%98%AFB%E6%A0%91"><span class="toc-number">5.23.</span> <span class="toc-text">数据库为什么使用B+树而不是B树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-%E6%A0%91%E5%9C%A8%E6%BB%A1%E8%B6%B3%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E5%92%8C%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%8D%E9%9C%80%E8%A6%81%E5%9B%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%EF%BC%8C"><span class="toc-number">5.24.</span> <span class="toc-text">B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%EF%BC%9F%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="toc-number">5.25.</span> <span class="toc-text">什么是聚簇索引？何时使用聚簇索引与非聚簇索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E4%B8%80%E5%AE%9A%E4%BC%9A%E5%9B%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%90%97%EF%BC%9F"><span class="toc-number">5.26.</span> <span class="toc-text">非聚簇索引一定会回表查询吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E4%B8%AD%E7%9A%84%E9%A1%BA%E5%BA%8F%EF%BC%9F"><span class="toc-number">5.27.</span> <span class="toc-text">联合索引是什么？为什么需要注意联合索引中的顺序？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.1.</span> <span class="toc-text">什么是事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E7%89%A9%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7-ACID-%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B"><span class="toc-number">6.2.</span> <span class="toc-text">事物的四大特性(ACID)介绍一下?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%84%8F%E8%AF%BB%EF%BC%9F%E5%B9%BB%E8%AF%BB%EF%BC%9F%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%9F"><span class="toc-number">6.3.</span> <span class="toc-text">什么是脏读？幻读？不可重复读？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%9FMySQL%E7%9A%84%E9%BB%98%E8%AE%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.4.</span> <span class="toc-text">什么是事务的隔离级别？MySQL的默认隔离级别是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">6.5.</span> <span class="toc-text">事务的隔离级别有哪些</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%81"><span class="toc-number">7.</span> <span class="toc-text">锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E9%94%81"><span class="toc-number">7.1.</span> <span class="toc-text">什么是锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">7.2.</span> <span class="toc-text">隔离级别与锁的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E7%85%A7%E9%94%81%E7%9A%84%E7%B2%92%E5%BA%A6%E5%88%86%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F%E9%94%81%E6%9C%BA%E5%88%B6%E4%B8%8EInnoDB%E9%94%81%E7%AE%97%E6%B3%95"><span class="toc-number">7.3.</span> <span class="toc-text">按照锁的粒度分数据库锁有哪些？锁机制与InnoDB锁算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E9%94%81%E7%9A%84%E7%B1%BB%E5%88%AB%E4%B8%8A%E5%88%86MySQL%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81%E5%91%A2%EF%BC%9F%E5%83%8F%E4%B8%8A%E9%9D%A2%E9%82%A3%E6%A0%B7%E5%AD%90%E8%BF%9B%E8%A1%8C%E9%94%81%E5%AE%9A%E5%B2%82%E4%B8%8D%E6%98%AF%E6%9C%89%E7%82%B9%E9%98%BB%E7%A2%8D%E5%B9%B6%E5%8F%91%E6%95%88%E7%8E%87%E4%BA%86"><span class="toc-number">7.4.</span> <span class="toc-text">从锁的类别上分MySQL都有哪些锁呢？像上面那样子进行锁定岂不是有点阻碍并发效率了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E4%B8%ADInnoDB%E5%BC%95%E6%93%8E%E7%9A%84%E8%A1%8C%E9%94%81%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">7.5.</span> <span class="toc-text">MySQL中InnoDB引擎的行锁是怎么实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E7%9A%84%E9%94%81%E7%9A%84%E7%AE%97%E6%B3%95%E6%9C%89%E4%B8%89%E7%A7%8D"><span class="toc-number">7.6.</span> <span class="toc-text">InnoDB存储引擎的锁的算法有三种</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81%EF%BC%9F%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="toc-number">7.7.</span> <span class="toc-text">什么是死锁？怎么解决？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">7.8.</span> <span class="toc-text">数据库的乐观锁和悲观锁是什么？怎么实现的？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">8.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="toc-number">8.1.</span> <span class="toc-text">为什么要使用视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE"><span class="toc-number">8.2.</span> <span class="toc-text">什么是视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E6%9C%89%E5%93%AA%E4%BA%9B%E7%89%B9%E7%82%B9"><span class="toc-number">8.3.</span> <span class="toc-text">视图有哪些特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">8.4.</span> <span class="toc-text">视图的使用场景有哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">8.5.</span> <span class="toc-text">视图的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">8.6.</span> <span class="toc-text">视图的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%92%8C%E8%A7%86%E5%9B%BE%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">8.7.</span> <span class="toc-text">表和视图的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%B8%B8%E6%A0%87"><span class="toc-number">8.8.</span> <span class="toc-text">什么是游标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0"><span class="toc-number">9.</span> <span class="toc-text">存储过程与函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">9.1.</span> <span class="toc-text">什么是存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%94%A8%E4%BB%80%E4%B9%88%E6%9D%A5%E8%B0%83%E7%94%A8"><span class="toc-number">9.2.</span> <span class="toc-text">存储过程用什么来调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">9.3.</span> <span class="toc-text">存储过程的优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">9.4.</span> <span class="toc-text">存储过程与函数的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.1.</span> <span class="toc-text">什么是触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="toc-number">10.2.</span> <span class="toc-text">触发器的使用场景有哪些</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E4%B8%AD%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">10.3.</span> <span class="toc-text">MySQL中都有哪些触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%89%8D%E8%A7%A6%E5%8F%91%E5%92%8C%E4%BA%8B%E5%90%8E%E8%A7%A6%E5%8F%91%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="toc-number">10.4.</span> <span class="toc-text">事前触发和事后触发有什么区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5%E7%BA%A7%E8%A7%A6%E5%8F%91%E5%92%8C%E8%A1%8C%E7%BA%A7%E8%A7%A6%E5%8F%91%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB"><span class="toc-number">10.5.</span> <span class="toc-text">语句级触发和行级触发有何区别</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/9e4778f1.html" title="刀塔生涯简忆"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202308211439548.webp?imageMogr2/format/webp/interlace/1/quality/0" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="刀塔生涯简忆"></a><div class="content"><a class="title" href="/9e4778f1.html" title="刀塔生涯简忆">刀塔生涯简忆</a><time datetime="2023-08-21T14:30:00.000Z" title="发表于 2023-08-21 14:30:00">2023-08-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/946e5449.html" title="Bing Wallpaper (2023-07)"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208171632140.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Bing Wallpaper (2023-07)"></a><div class="content"><a class="title" href="/946e5449.html" title="Bing Wallpaper (2023-07)">Bing Wallpaper (2023-07)</a><time datetime="2023-08-05T15:33:33.000Z" title="发表于 2023-08-05 15:33:33">2023-08-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/c57f6464.html" title="Hexo 自动化部署方案"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208030938781.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Hexo 自动化部署方案"></a><div class="content"><a class="title" href="/c57f6464.html" title="Hexo 自动化部署方案">Hexo 自动化部署方案</a><time datetime="2023-08-04T11:48:00.000Z" title="发表于 2023-08-04 11:48:00">2023-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/c53d54b9.html" title="【Stellaris】Dev Diary#307 - Leader Experiments"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208240905349.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Stellaris】Dev Diary#307 - Leader Experiments"></a><div class="content"><a class="title" href="/c53d54b9.html" title="【Stellaris】Dev Diary#307 - Leader Experiments">【Stellaris】Dev Diary#307 - Leader Experiments</a><time datetime="2023-08-03T19:05:20.000Z" title="发表于 2023-08-03 19:05:20">2023-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/a69d0ac1.html" title="【HOI4】开发者日志 | 小功能"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202208050837635.jpeg?imageMogr2/format/webp/interlace/1/quality/0" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【HOI4】开发者日志 | 小功能"></a><div class="content"><a class="title" href="/a69d0ac1.html" title="【HOI4】开发者日志 | 小功能">【HOI4】开发者日志 | 小功能</a><time datetime="2023-08-02T21:08:20.000Z" title="发表于 2023-08-02 21:08:20">2023-08-02</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202307301125150.svg" alt="打工人，打工魂，打工人都是人上人!" title="打工人，打工魂，打工人都是人上人!"><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"></a><a class="github-badge" target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" style="margin-inline:5px" data-title="本站使用又拍云为静态资源提供CDN加速" title="本站使用又拍云为静态资源提供CDN加速"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202307300809655.svg" alt="本站使用又拍云为静态资源提供CDN加速"></a><a class="github-badge" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=35020502000606" style="margin-inline:5px" data-title="闽公网安备35020502000606号" title="闽公网安备35020502000606号"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cos.gjcloak.xyz/pigo/202307300808149.svg" alt="闽公网安备35020502000606号"></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2022 - 2023 By <a class="footer-bar-link" href="/" title="公爵" target="_blank">公爵</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" href="/essay/" title="站务">站务</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="赣ICP备2022001242号-1">赣ICP备2022001242号-1</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://icp.gov.moe/?keyword=20226257" title="萌ICP备20226257号">萌ICP备20226257号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">232</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">328</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.gjcloak.top/" title="引导"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" alt="引导"><span class="back-menu-item-text">引导</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://beta.gjcloak.top/" title="导航"><img class="back-menu-item-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=763771418&amp;s=640" alt="导航"><span class="back-menu-item-text">导航</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size:.9em"></i> <span>归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size:.9em"></i> <span>分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size:.9em"></i> <span>标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size:.9em"></i> <span>友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size:.9em"></i> <span>朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size:.9em"></i> <span>虫洞</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=156642394&amp;server=netease&amp;type=playlist/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size:.9em"></i> <span>音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size:.9em"></i> <span>追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/atlas/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size:.9em"></i> <span>相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size:.9em"></i> <span>关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size:.9em"></i> <span>闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://memos.gjcloak.top/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size:.9em"></i> <span>我的哔哔</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/goods/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size:.9em"></i> <span>我的好物</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Anaconda/" style="font-size:.88rem">Anaconda<sup>1</sup></a><a href="/tags/Berserker/" style="font-size:.88rem">Berserker<sup>1</sup></a><a href="/tags/EU4/" style="font-size:.88rem">EU4<sup>26</sup></a><a href="/tags/fate/" style="font-size:.88rem">fate<sup>1</sup></a><a href="/tags/pixiv/" style="font-size:.88rem">pixiv<sup>1</sup></a><a href="/tags/poxiv/" style="font-size:.88rem">poxiv<sup>1</sup></a><a href="/tags/p%E7%AB%99/" style="font-size:.88rem">p站<sup>6</sup></a><a href="/tags/%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B/" style="font-size:.88rem">业务流程<sup>1</sup></a><a href="/tags/%E4%B8%AD%E7%BA%A7/" style="font-size:.88rem">中级<sup>1</sup></a><a href="/tags/%E4%B8%BB%E6%B5%81%E7%A4%BE%E4%BA%A4%E5%AA%92%E4%BD%93%E5%B9%B3%E5%8F%B0/" style="font-size:.88rem">主流社交媒体平台<sup>1</sup></a><a href="/tags/%E4%BA%8C%E6%AC%A1%E5%85%83/" style="font-size:.88rem">二次元<sup>2</sup></a><a href="/tags/%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/" style="font-size:.88rem">入门指南<sup>3</sup></a><a href="/tags/%E5%88%86%E4%BA%AB/" style="font-size:.88rem">分享<sup>23</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size:.88rem">动漫<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2/" style="font-size:.88rem">博客<sup>8</sup></a><a href="/tags/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96/" style="font-size:.88rem">去中心化<sup>4</sup></a><a href="/tags/%E5%9B%BE%E7%89%87/" style="font-size:.88rem">图片<sup>3</sup></a><a href="/tags/%E5%A3%81%E7%BA%B8/" style="font-size:.88rem">壁纸<sup>3</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size:.88rem">学习笔记<sup>31</sup></a><a href="/tags/%E6%8F%92%E7%94%BB/" style="font-size:.88rem">插画<sup>6</sup></a><a href="/tags/%E6%90%AD%E5%BB%BA/" style="font-size:.88rem">搭建<sup>5</sup></a><a href="/tags/%E6%94%B9%E6%B4%BE/" style="font-size:.88rem">改派<sup>3</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97/" style="font-size:.88rem">更新日志<sup>3</sup></a><a href="/tags/%E6%AC%A7%E9%99%86%E9%A3%8E%E4%BA%914/" style="font-size:.88rem">欧陆风云4<sup>25</sup></a><a href="/tags/%E7%94%A8%E6%88%B7/" style="font-size:.88rem">用户<sup>1</sup></a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:.88rem">笔记<sup>8</sup></a><a href="/tags/%E7%BE%8E%E5%9B%BE/" style="font-size:.88rem">美图<sup>1</sup></a><a href="/tags/%E8%87%AA%E5%BB%BA%E5%9B%BD/" style="font-size:.88rem">自建国<sup>1</sup></a><a href="/tags/%E9%98%85%E8%AF%BB/" style="font-size:.88rem">阅读<sup>2</sup></a><a href="/tags/%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" style="font-size:.88rem">需求分析<sup>2</sup></a></div></div><hr></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="156642394" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size:1rem"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=156642394&quot;, &quot;_blank&quot;);" style="display:none"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET={CONFIG:{modules:"0124",background:"2",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"E8D87B",aqiSize:"16",weatherIconSize:"24",alertIconSize:"18",padding:"10px 10px 10px 10px",shadow:"0",language:"auto",borderRadius:"20",fixed:"true",vertical:"top",horizontal:"left",left:"20",top:"7.1",key:"df245676fb434a0691ead1c63341cd94"}}</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script async>!function(){var e,t,n,r,o,a=new Date("01/19/2022 13:09:46"),i=new Date;setInterval((()=>{!function(){i=new Date,o=i.getHours();var l=(i-a)/1e3/60/60/24;e=Math.floor(l);var u=(i-a)/1e3/60/60-24*e;t=Math.floor(u),1==String(t).length&&(t="0"+t);var c=(i-a)/1e3/60-1440*e-60*t;n=Math.floor(c),1==String(n).length&&(n="0"+n);var s=(i-a)/1e3-86400*e-3600*t-60*n;r=Math.round(s),1==String(r).length&&(r="0"+r)}(),function(){if(!document.getElementById("footer"))return;let a="";if(o<18&&o>=9)a=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;else{let o=document.querySelector("#workboard .workSituationImg");o.src="https://cos.gjcloak.xyz/pigo/202307301125148.svg",o.title="还谈什么说走就走的旅行，下班的时候想走都不行。",o.alt="还谈什么说走就走的旅行，下班的时候想走都不行。",a=`本站居然运行了 ${e} 天<span id='runtime'> ${t} 小时 ${n} 分 ${r} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`}document.getElementById("runtimeTextTip")&&(document.getElementById("runtimeTextTip").innerHTML=a)}()}),1e3)}()</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const o=()=>{"object"==typeof twikoo?setTimeout(t,0):getScript("https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js").then(t)},t=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.gjcloak.top/",region:"",onCommentLoaded:()=>{anzhiyu.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))};o()})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'><div class='name'><span>${e[n].nick} </span></div></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <time datetime="${e[n].date}">${anzhiyu.diffDate(e[n].date,!0)}</time></div>\n        </div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("twikoo-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{twikoo.getRecentComments({envId:"https://twikoo.gjcloak.top/",region:"",pageSize:6,includeReply:!0}).then((function(t){const n=t.map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.id,date:new Date(e.created).toISOString()};var t}));saveToLocal.set("twikoo-newest-comments",JSON.stringify(n),30/1440),e(n)})).catch((function(e){document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof twikoo?t():getScript("https://cdn.cbd.int/twikoo@1.6.17/dist/twikoo.all.min.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail="one@gjcloak.top"</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors=['meta[property="og:image"]','meta[property="og:title"]','meta[property="og:url"]','meta[property="og:type"]','meta[property="og:site_name"]','meta[property="og:description"]',"head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!0,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(anzhiyu.removeGlobalFnEvent("pjax"),anzhiyu.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","G-ME8L91NJ6Q",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>